<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>DifferentialEquations.jl · Agents.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="https://fonts.googleapis.com/css?family=Montserrat|Source+Code+Pro&amp;display=swap" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Agents.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">Agents.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../tutorial/">Tutorial</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../schelling/">Schelling&#39;s segregation model</a></li><li><a class="tocitem" href="../sir/">SIR model for the spread of COVID-19</a></li><li><a class="tocitem" href="../social_distancing/">Continuous space social distancing for COVID-19</a></li><li><a class="tocitem" href="../wealth_distribution/">Wealth distribution</a></li><li><a class="tocitem" href="../forest_fire/">Forest fire</a></li><li><a class="tocitem" href="../game_of_life_2D_CA/">Conway&#39;s game of life</a></li><li><a class="tocitem" href="../wright-fisher/">Wright-Fisher model of evolution</a></li><li><a class="tocitem" href="../HK/">Hegselmann-Krause opinion dynamics</a></li><li><a class="tocitem" href="../flock/">Flocking</a></li><li><a class="tocitem" href="../daisyworld/">Daisyworld</a></li><li><a class="tocitem" href="../predator_prey/">Predator-Prey</a></li><li><a class="tocitem" href="../growing_bacteria/">Bacteria Growth</a></li></ul></li><li><a class="tocitem" href="../../models/">Predefined Models</a></li><li><a class="tocitem" href="../../api/">API</a></li><li><a class="tocitem" href="../../interact/">Interactive application</a></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox" checked/><label class="tocitem" for="menuitem-7"><span class="docs-label">Integration</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>DifferentialEquations.jl</a><ul class="internal"><li><a class="tocitem" href="#Problem-setup"><span>Problem setup</span></a></li><li><a class="tocitem" href="#Coupling-DifferentialEquations.jl-to-Agents.jl"><span>Coupling DifferentialEquations.jl to Agents.jl</span></a></li><li><a class="tocitem" href="#Coupling-Agents.jl-to-DifferentialEquations.jl"><span>Coupling Agents.jl to DifferentialEquations.jl</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../../mesa/">Comparison against Mesa (Python)</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Integration</a></li><li class="is-active"><a href>DifferentialEquations.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>DifferentialEquations.jl</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaDynamics/Agents.jl/blob/master/examples/diffeq.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Integrating-Agents.jl-with-DifferentialEquations.jl"><a class="docs-heading-anchor" href="#Integrating-Agents.jl-with-DifferentialEquations.jl">Integrating Agents.jl with DifferentialEquations.jl</a><a id="Integrating-Agents.jl-with-DifferentialEquations.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Integrating-Agents.jl-with-DifferentialEquations.jl" title="Permalink"></a></h1><p>Leveraging other best-in-class packages from the Julia ecosystem is one of the many strengths Agents.jl provides over alternative ABMs.</p><p>The <a href="https://github.com/SciML/DifferentialEquations.jl">DifferentialEquations.jl</a> package <a href="http://www.stochasticlifestyle.com/wp-content/uploads/2019/08/de_solver_software_comparsion.pdf">consistently outperforms</a> other differential equation solvers. Here, we provide a few ways of leveraging <code>DifferentialEquations</code> to solve agent based models in an efficient and performant manner, whilst mitigating stability issues one may encounter.</p><p>It is common in discrete time step tools (such as <code>Agents</code>) to also discretise equations required for obtaining solutions. In the following example, we use the <a href="https://en.wikipedia.org/wiki/Euler_method">forward Euler method</a> to discretise a logistic function</p><p><span>$\frac{\mathrm{d}s}{\mathrm{d}t} = s \left(1-\frac{s}{120}\right) - h$</span></p><p>into</p><p><span>$s_{t+1} = s_t + s_t (1-s_t/120)-h.$</span></p><p>In this example, <span>$s$</span> denotes some fish <strong>s</strong>tock that increases over time until a maximum population (e.g. 120 here) is met, with the additional property that a <strong>h</strong>arvest (<span>$h$</span>) may also remove some population (we also assume a timestep of 1 normalised unit to simplify things).</p><h2 id="Problem-setup"><a class="docs-heading-anchor" href="#Problem-setup">Problem setup</a><a id="Problem-setup-1"></a><a class="docs-heading-anchor-permalink" href="#Problem-setup" title="Permalink"></a></h2><p>Let&#39;s build a fishing community with fishers, each with differing methods and experience, culminating in a variety of competence when it comes to actually catching fish.</p><pre><code class="language-julia">using Agents
using Distributions
using Plots

mutable struct Fisher &lt;: AbstractAgent
    id::Int
    competence::Int
    yearly_catch::Float64
end

function agent_step!(agent, model)
    # Make sure we sample from the fish distribution
    agent.yearly_catch = rand(Poisson(agent.competence))
end

function dstock(model)
    # Only allow fishing if stocks are high enough
    h = model.stock &gt; model.min_threshold ? sum(a.yearly_catch for a in allagents(model)) :
        0.0

    model.stock * (1 - (model.stock / model.max_population)) - h
end

function model_step!(model)
    model.stock += dstock(model)
end</code></pre><p>These methods should be quite straightforward: each step of the model (<code>agent_step!</code>), every agent will catch some fish based on their competency. There are some safeguards in place to not allow fishers to totally deplete the stock, thus <code>dstock</code> checks the total yearly catch and only harvests if the population is above a minimal threshold (in a more complete example, one should set a flag to state that this year&#39;s catch exceeded the limit and regulate fishing next year, but we&#39;ll ignore this complexity for this example).</p><p>Building this model is simple. Set some initial conditions for the stock, and add agents with some competence.</p><pre><code class="language-julia">function initialise(;
    stock = 5.0, # Initial population of fish
    max_population = 500.0, # Maximum value of fish stock
    min_threshold = 60.0, # Regulate fishing if population drops below this value
    nagents = 50,
)
    model = ABM(
        Fisher;
        properties = Dict(
            :stock =&gt; stock,
            :max_population =&gt; max_population,
            :min_threshold =&gt; min_threshold,
        ),
    )
    for _ in 1:nagents
        add_agent!(
            model,
            # Competence level is a lognormal distribution between 1 and 5
            floor(rand(truncated(LogNormal(), 1, 6))),
            # Yearly catch can start at 0
            0.0,
        )
    end
    model
end</code></pre><p>We can now run the model and see how the fishery fairs over the next 20 years.</p><pre><code class="language-julia">model = initialise()
_, results = run!(model, agent_step!, model_step!, 20; mdata = [:stock])

plot(results.stock; legend = false, ylabel = &quot;Stock&quot;, xlabel = &quot;Year&quot;)</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip430">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip430)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip431">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip430)" d="
M224.866 1423.18 L2352.76 1423.18 L2352.76 47.2441 L224.866 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip432">
    <rect x="224" y="47" width="2129" height="1377"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip432)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  686.578,1423.18 686.578,47.2441 
  "/>
<polyline clip-path="url(#clip432)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1188.44,1423.18 1188.44,47.2441 
  "/>
<polyline clip-path="url(#clip432)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1690.3,1423.18 1690.3,47.2441 
  "/>
<polyline clip-path="url(#clip432)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  2192.16,1423.18 2192.16,47.2441 
  "/>
<polyline clip-path="url(#clip432)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  224.866,1203 2352.76,1203 
  "/>
<polyline clip-path="url(#clip432)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  224.866,961.344 2352.76,961.344 
  "/>
<polyline clip-path="url(#clip432)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  224.866,719.69 2352.76,719.69 
  "/>
<polyline clip-path="url(#clip432)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  224.866,478.037 2352.76,478.037 
  "/>
<polyline clip-path="url(#clip432)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  224.866,236.383 2352.76,236.383 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  224.866,1423.18 2352.76,1423.18 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  224.866,1423.18 224.866,47.2441 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  686.578,1423.18 686.578,1406.67 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1188.44,1423.18 1188.44,1406.67 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1690.3,1423.18 1690.3,1406.67 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  2192.16,1423.18 2192.16,1406.67 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  224.866,1203 250.401,1203 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  224.866,961.344 250.401,961.344 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  224.866,719.69 250.401,719.69 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  224.866,478.037 250.401,478.037 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  224.866,236.383 250.401,236.383 
  "/>
<path clip-path="url(#clip430)" d="M 0 0 M676.856 1442.09 L695.212 1442.09 L695.212 1446.03 L681.138 1446.03 L681.138 1454.5 Q682.157 1454.15 683.175 1453.99 Q684.194 1453.8 685.212 1453.8 Q690.999 1453.8 694.379 1456.98 Q697.759 1460.15 697.759 1465.56 Q697.759 1471.14 694.286 1474.24 Q690.814 1477.32 684.495 1477.32 Q682.319 1477.32 680.05 1476.95 Q677.805 1476.58 675.398 1475.84 L675.398 1471.14 Q677.481 1472.28 679.703 1472.83 Q681.925 1473.39 684.402 1473.39 Q688.407 1473.39 690.745 1471.28 Q693.083 1469.18 693.083 1465.56 Q693.083 1461.95 690.745 1459.85 Q688.407 1457.74 684.402 1457.74 Q682.527 1457.74 680.652 1458.16 Q678.8 1458.57 676.856 1459.45 L676.856 1442.09 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M1165.31 1472.72 L1172.95 1472.72 L1172.95 1446.35 L1164.64 1448.02 L1164.64 1443.76 L1172.91 1442.09 L1177.58 1442.09 L1177.58 1472.72 L1185.22 1472.72 L1185.22 1476.65 L1165.31 1476.65 L1165.31 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M1200.29 1445.17 Q1196.68 1445.17 1194.85 1448.74 Q1193.05 1452.28 1193.05 1459.41 Q1193.05 1466.51 1194.85 1470.08 Q1196.68 1473.62 1200.29 1473.62 Q1203.92 1473.62 1205.73 1470.08 Q1207.56 1466.51 1207.56 1459.41 Q1207.56 1452.28 1205.73 1448.74 Q1203.92 1445.17 1200.29 1445.17 M1200.29 1441.47 Q1206.1 1441.47 1209.16 1446.07 Q1212.24 1450.66 1212.24 1459.41 Q1212.24 1468.13 1209.16 1472.74 Q1206.1 1477.32 1200.29 1477.32 Q1194.48 1477.32 1191.4 1472.74 Q1188.35 1468.13 1188.35 1459.41 Q1188.35 1450.66 1191.4 1446.07 Q1194.48 1441.47 1200.29 1441.47 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M1667.67 1472.72 L1675.31 1472.72 L1675.31 1446.35 L1667 1448.02 L1667 1443.76 L1675.27 1442.09 L1679.94 1442.09 L1679.94 1472.72 L1687.58 1472.72 L1687.58 1476.65 L1667.67 1476.65 L1667.67 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M1692.7 1442.09 L1711.05 1442.09 L1711.05 1446.03 L1696.98 1446.03 L1696.98 1454.5 Q1698 1454.15 1699.01 1453.99 Q1700.03 1453.8 1701.05 1453.8 Q1706.84 1453.8 1710.22 1456.98 Q1713.6 1460.15 1713.6 1465.56 Q1713.6 1471.14 1710.13 1474.24 Q1706.65 1477.32 1700.33 1477.32 Q1698.16 1477.32 1695.89 1476.95 Q1693.64 1476.58 1691.24 1475.84 L1691.24 1471.14 Q1693.32 1472.28 1695.54 1472.83 Q1697.76 1473.39 1700.24 1473.39 Q1704.25 1473.39 1706.58 1471.28 Q1708.92 1469.18 1708.92 1465.56 Q1708.92 1461.95 1706.58 1459.85 Q1704.25 1457.74 1700.24 1457.74 Q1698.37 1457.74 1696.49 1458.16 Q1694.64 1458.57 1692.7 1459.45 L1692.7 1442.09 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M2173.31 1472.72 L2189.63 1472.72 L2189.63 1476.65 L2167.68 1476.65 L2167.68 1472.72 Q2170.34 1469.96 2174.93 1465.33 Q2179.53 1460.68 2180.71 1459.34 Q2182.96 1456.81 2183.84 1455.08 Q2184.74 1453.32 2184.74 1451.63 Q2184.74 1448.87 2182.8 1447.14 Q2180.88 1445.4 2177.77 1445.4 Q2175.57 1445.4 2173.12 1446.17 Q2170.69 1446.93 2167.91 1448.48 L2167.91 1443.76 Q2170.74 1442.62 2173.19 1442.05 Q2175.64 1441.47 2177.68 1441.47 Q2183.05 1441.47 2186.25 1444.15 Q2189.44 1446.84 2189.44 1451.33 Q2189.44 1453.46 2188.63 1455.38 Q2187.84 1457.28 2185.74 1459.87 Q2185.16 1460.54 2182.06 1463.76 Q2178.95 1466.95 2173.31 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M2204.7 1445.17 Q2201.08 1445.17 2199.26 1448.74 Q2197.45 1452.28 2197.45 1459.41 Q2197.45 1466.51 2199.26 1470.08 Q2201.08 1473.62 2204.7 1473.62 Q2208.33 1473.62 2210.13 1470.08 Q2211.96 1466.51 2211.96 1459.41 Q2211.96 1452.28 2210.13 1448.74 Q2208.33 1445.17 2204.7 1445.17 M2204.7 1441.47 Q2210.51 1441.47 2213.56 1446.07 Q2216.64 1450.66 2216.64 1459.41 Q2216.64 1468.13 2213.56 1472.74 Q2210.51 1477.32 2204.7 1477.32 Q2198.88 1477.32 2195.81 1472.74 Q2192.75 1468.13 2192.75 1459.41 Q2192.75 1450.66 2195.81 1446.07 Q2198.88 1441.47 2204.7 1441.47 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M157.533 1216.34 L173.852 1216.34 L173.852 1220.28 L151.908 1220.28 L151.908 1216.34 Q154.57 1213.59 159.153 1208.96 Q163.76 1204.31 164.941 1202.96 Q167.186 1200.44 168.065 1198.7 Q168.968 1196.94 168.968 1195.25 Q168.968 1192.5 167.024 1190.76 Q165.103 1189.03 162.001 1189.03 Q159.802 1189.03 157.348 1189.79 Q154.917 1190.56 152.14 1192.11 L152.14 1187.38 Q154.964 1186.25 157.417 1185.67 Q159.871 1185.09 161.908 1185.09 Q167.278 1185.09 170.473 1187.78 Q173.667 1190.46 173.667 1194.95 Q173.667 1197.08 172.857 1199 Q172.07 1200.9 169.964 1203.5 Q169.385 1204.17 166.283 1207.38 Q163.181 1210.58 157.533 1216.34 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M188.922 1188.8 Q185.311 1188.8 183.482 1192.36 Q181.677 1195.9 181.677 1203.03 Q181.677 1210.14 183.482 1213.7 Q185.311 1217.25 188.922 1217.25 Q192.556 1217.25 194.362 1213.7 Q196.19 1210.14 196.19 1203.03 Q196.19 1195.9 194.362 1192.36 Q192.556 1188.8 188.922 1188.8 M188.922 1185.09 Q194.732 1185.09 197.788 1189.7 Q200.866 1194.28 200.866 1203.03 Q200.866 1211.76 197.788 1216.37 Q194.732 1220.95 188.922 1220.95 Q183.112 1220.95 180.033 1216.37 Q176.977 1211.76 176.977 1203.03 Q176.977 1194.28 180.033 1189.7 Q183.112 1185.09 188.922 1185.09 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M164.269 948.138 L152.464 966.587 L164.269 966.587 L164.269 948.138 M163.042 944.064 L168.922 944.064 L168.922 966.587 L173.852 966.587 L173.852 970.476 L168.922 970.476 L168.922 978.624 L164.269 978.624 L164.269 970.476 L148.667 970.476 L148.667 965.962 L163.042 944.064 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M188.922 947.143 Q185.311 947.143 183.482 950.708 Q181.677 954.249 181.677 961.379 Q181.677 968.485 183.482 972.05 Q185.311 975.592 188.922 975.592 Q192.556 975.592 194.362 972.05 Q196.19 968.485 196.19 961.379 Q196.19 954.249 194.362 950.708 Q192.556 947.143 188.922 947.143 M188.922 943.439 Q194.732 943.439 197.788 948.046 Q200.866 952.629 200.866 961.379 Q200.866 970.106 197.788 974.712 Q194.732 979.295 188.922 979.295 Q183.112 979.295 180.033 974.712 Q176.977 970.106 176.977 961.379 Q176.977 952.629 180.033 948.046 Q183.112 943.439 188.922 943.439 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M162.325 717.827 Q159.177 717.827 157.325 719.98 Q155.496 722.132 155.496 725.882 Q155.496 729.609 157.325 731.785 Q159.177 733.938 162.325 733.938 Q165.473 733.938 167.302 731.785 Q169.153 729.609 169.153 725.882 Q169.153 722.132 167.302 719.98 Q165.473 717.827 162.325 717.827 M171.607 703.174 L171.607 707.433 Q169.848 706.6 168.042 706.16 Q166.26 705.721 164.501 705.721 Q159.871 705.721 157.417 708.845 Q154.987 711.97 154.64 718.29 Q156.005 716.276 158.066 715.211 Q160.126 714.123 162.603 714.123 Q167.811 714.123 170.82 717.295 Q173.852 720.443 173.852 725.882 Q173.852 731.206 170.704 734.424 Q167.556 737.642 162.325 737.642 Q156.329 737.642 153.158 733.058 Q149.987 728.452 149.987 719.725 Q149.987 711.531 153.876 706.67 Q157.765 701.785 164.316 701.785 Q166.075 701.785 167.857 702.133 Q169.663 702.48 171.607 703.174 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M188.922 705.489 Q185.311 705.489 183.482 709.054 Q181.677 712.595 181.677 719.725 Q181.677 726.832 183.482 730.396 Q185.311 733.938 188.922 733.938 Q192.556 733.938 194.362 730.396 Q196.19 726.832 196.19 719.725 Q196.19 712.595 194.362 709.054 Q192.556 705.489 188.922 705.489 M188.922 701.785 Q194.732 701.785 197.788 706.392 Q200.866 710.975 200.866 719.725 Q200.866 728.452 197.788 733.058 Q194.732 737.642 188.922 737.642 Q183.112 737.642 180.033 733.058 Q176.977 728.452 176.977 719.725 Q176.977 710.975 180.033 706.392 Q183.112 701.785 188.922 701.785 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M162.001 478.905 Q158.667 478.905 156.746 480.687 Q154.848 482.469 154.848 485.594 Q154.848 488.719 156.746 490.502 Q158.667 492.284 162.001 492.284 Q165.334 492.284 167.255 490.502 Q169.177 488.696 169.177 485.594 Q169.177 482.469 167.255 480.687 Q165.357 478.905 162.001 478.905 M157.325 476.914 Q154.316 476.173 152.626 474.113 Q150.959 472.053 150.959 469.09 Q150.959 464.946 153.899 462.539 Q156.862 460.132 162.001 460.132 Q167.163 460.132 170.103 462.539 Q173.042 464.946 173.042 469.09 Q173.042 472.053 171.353 474.113 Q169.686 476.173 166.7 476.914 Q170.079 477.701 171.954 479.993 Q173.852 482.284 173.852 485.594 Q173.852 490.617 170.774 493.303 Q167.718 495.988 162.001 495.988 Q156.283 495.988 153.204 493.303 Q150.149 490.617 150.149 485.594 Q150.149 482.284 152.047 479.993 Q153.945 477.701 157.325 476.914 M155.612 469.53 Q155.612 472.215 157.279 473.719 Q158.968 475.224 162.001 475.224 Q165.01 475.224 166.7 473.719 Q168.413 472.215 168.413 469.53 Q168.413 466.844 166.7 465.34 Q165.01 463.835 162.001 463.835 Q158.968 463.835 157.279 465.34 Q155.612 466.844 155.612 469.53 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M188.922 463.835 Q185.311 463.835 183.482 467.4 Q181.677 470.942 181.677 478.071 Q181.677 485.178 183.482 488.743 Q185.311 492.284 188.922 492.284 Q192.556 492.284 194.362 488.743 Q196.19 485.178 196.19 478.071 Q196.19 470.942 194.362 467.4 Q192.556 463.835 188.922 463.835 M188.922 460.132 Q194.732 460.132 197.788 464.738 Q200.866 469.321 200.866 478.071 Q200.866 486.798 197.788 491.405 Q194.732 495.988 188.922 495.988 Q183.112 495.988 180.033 491.405 Q176.977 486.798 176.977 478.071 Q176.977 469.321 180.033 464.738 Q183.112 460.132 188.922 460.132 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M126.931 249.728 L134.57 249.728 L134.57 223.362 L126.26 225.029 L126.26 220.769 L134.524 219.103 L139.2 219.103 L139.2 249.728 L146.839 249.728 L146.839 253.663 L126.931 253.663 L126.931 249.728 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M161.908 222.181 Q158.297 222.181 156.468 225.746 Q154.663 229.288 154.663 236.417 Q154.663 243.524 156.468 247.089 Q158.297 250.63 161.908 250.63 Q165.542 250.63 167.348 247.089 Q169.177 243.524 169.177 236.417 Q169.177 229.288 167.348 225.746 Q165.542 222.181 161.908 222.181 M161.908 218.478 Q167.718 218.478 170.774 223.084 Q173.852 227.668 173.852 236.417 Q173.852 245.144 170.774 249.751 Q167.718 254.334 161.908 254.334 Q156.098 254.334 153.019 249.751 Q149.964 245.144 149.964 236.417 Q149.964 227.668 153.019 223.084 Q156.098 218.478 161.908 218.478 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M188.922 222.181 Q185.311 222.181 183.482 225.746 Q181.677 229.288 181.677 236.417 Q181.677 243.524 183.482 247.089 Q185.311 250.63 188.922 250.63 Q192.556 250.63 194.362 247.089 Q196.19 243.524 196.19 236.417 Q196.19 229.288 194.362 225.746 Q192.556 222.181 188.922 222.181 M188.922 218.478 Q194.732 218.478 197.788 223.084 Q200.866 227.668 200.866 236.417 Q200.866 245.144 197.788 249.751 Q194.732 254.334 188.922 254.334 Q183.112 254.334 180.033 249.751 Q176.977 245.144 176.977 236.417 Q176.977 227.668 180.033 223.084 Q183.112 218.478 188.922 218.478 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M1224.37 1508.52 L1231.28 1508.52 L1244.46 1528.07 L1257.54 1508.52 L1264.45 1508.52 L1247.64 1533.41 L1247.64 1556.04 L1241.18 1556.04 L1241.18 1533.41 L1224.37 1508.52 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M1292.42 1536.76 L1292.42 1539.62 L1265.5 1539.62 Q1265.88 1545.67 1269.13 1548.85 Q1272.4 1552 1278.23 1552 Q1281.6 1552 1284.75 1551.17 Q1287.94 1550.35 1291.05 1548.69 L1291.05 1554.23 Q1287.9 1555.57 1284.59 1556.27 Q1281.28 1556.97 1277.88 1556.97 Q1269.35 1556.97 1264.35 1552 Q1259.39 1547.04 1259.39 1538.57 Q1259.39 1529.82 1264.1 1524.69 Q1268.84 1519.54 1276.86 1519.54 Q1284.05 1519.54 1288.22 1524.18 Q1292.42 1528.8 1292.42 1536.76 M1286.57 1535.04 Q1286.5 1530.23 1283.86 1527.37 Q1281.25 1524.5 1276.92 1524.5 Q1272.02 1524.5 1269.06 1527.27 Q1266.13 1530.04 1265.69 1535.07 L1286.57 1535.04 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M1314.77 1538.12 Q1307.67 1538.12 1304.93 1539.75 Q1302.19 1541.37 1302.19 1545.29 Q1302.19 1548.4 1304.23 1550.25 Q1306.3 1552.07 1309.83 1552.07 Q1314.7 1552.07 1317.63 1548.63 Q1320.59 1545.16 1320.59 1539.43 L1320.59 1538.12 L1314.77 1538.12 M1326.45 1535.71 L1326.45 1556.04 L1320.59 1556.04 L1320.59 1550.63 Q1318.59 1553.88 1315.59 1555.44 Q1312.6 1556.97 1308.27 1556.97 Q1302.8 1556.97 1299.55 1553.91 Q1296.34 1550.82 1296.34 1545.67 Q1296.34 1539.65 1300.35 1536.6 Q1304.39 1533.54 1312.38 1533.54 L1320.59 1533.54 L1320.59 1532.97 Q1320.59 1528.93 1317.92 1526.73 Q1315.28 1524.5 1310.47 1524.5 Q1307.41 1524.5 1304.52 1525.23 Q1301.62 1525.97 1298.95 1527.43 L1298.95 1522.02 Q1302.16 1520.78 1305.19 1520.17 Q1308.21 1519.54 1311.08 1519.54 Q1318.81 1519.54 1322.63 1523.55 Q1326.45 1527.56 1326.45 1535.71 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M1353.25 1525.87 Q1352.26 1525.3 1351.08 1525.04 Q1349.94 1524.76 1348.54 1524.76 Q1343.57 1524.76 1340.9 1528 Q1338.26 1531.22 1338.26 1537.27 L1338.26 1556.04 L1332.37 1556.04 L1332.37 1520.4 L1338.26 1520.4 L1338.26 1525.93 Q1340.1 1522.69 1343.06 1521.13 Q1346.02 1519.54 1350.26 1519.54 Q1350.86 1519.54 1351.59 1519.63 Q1352.32 1519.7 1353.22 1519.85 L1353.25 1525.87 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M42.0438 786.185 L48.314 786.185 Q46.5634 789.846 45.704 793.092 Q44.8447 796.339 44.8447 799.362 Q44.8447 804.614 46.8817 807.479 Q48.9187 810.311 52.6745 810.311 Q55.8255 810.311 57.4488 808.434 Q59.0402 806.524 60.0269 801.24 L60.8226 797.357 Q62.1912 790.164 65.6605 786.758 Q69.098 783.321 74.8908 783.321 Q81.7976 783.321 85.3624 787.968 Q88.9272 792.583 88.9272 801.527 Q88.9272 804.901 88.1633 808.72 Q87.3994 812.508 85.9035 816.582 L79.2831 816.582 Q81.4793 812.667 82.5933 808.911 Q83.7073 805.155 83.7073 801.527 Q83.7073 796.02 81.543 793.028 Q79.3786 790.037 75.3682 790.037 Q71.8671 790.037 69.8937 792.201 Q67.9204 794.333 66.9337 799.235 L66.1698 803.15 Q64.7375 810.343 61.682 813.558 Q58.6264 816.773 53.1837 816.773 Q46.8817 816.773 43.2532 812.348 Q39.6248 807.892 39.6248 800.094 Q39.6248 796.752 40.2295 793.283 Q40.8343 789.814 42.0438 786.185 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M42.2347 771.385 L52.3562 771.385 L52.3562 759.322 L56.9077 759.322 L56.9077 771.385 L76.2594 771.385 Q80.6199 771.385 81.8613 770.207 Q83.1026 768.998 83.1026 765.338 L83.1026 759.322 L88.0042 759.322 L88.0042 765.338 Q88.0042 772.117 85.4897 774.695 Q82.9434 777.273 76.2594 777.273 L56.9077 777.273 L56.9077 781.57 L52.3562 781.57 L52.3562 777.273 L42.2347 777.273 L42.2347 771.385 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M56.4621 739.366 Q56.4621 744.076 60.1542 746.813 Q63.8145 749.551 70.212 749.551 Q76.6095 749.551 80.3017 746.845 Q83.9619 744.108 83.9619 739.366 Q83.9619 734.687 80.2698 731.95 Q76.5777 729.212 70.212 729.212 Q63.8781 729.212 60.186 731.95 Q56.4621 734.687 56.4621 739.366 M51.4968 739.366 Q51.4968 731.727 56.4621 727.366 Q61.4273 723.006 70.212 723.006 Q78.9649 723.006 83.9619 727.366 Q88.9272 731.727 88.9272 739.366 Q88.9272 747.036 83.9619 751.397 Q78.9649 755.725 70.212 755.725 Q61.4273 755.725 56.4621 751.397 Q51.4968 747.036 51.4968 739.366 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M53.7248 691.209 L59.1993 691.209 Q57.8307 693.692 57.1623 696.206 Q56.4621 698.689 56.4621 701.235 Q56.4621 706.932 60.0905 710.083 Q63.6872 713.234 70.212 713.234 Q76.7369 713.234 80.3653 710.083 Q83.9619 706.932 83.9619 701.235 Q83.9619 698.689 83.2935 696.206 Q82.5933 693.692 81.2247 691.209 L86.6355 691.209 Q87.7814 693.66 88.3543 696.302 Q88.9272 698.912 88.9272 701.872 Q88.9272 709.924 83.8664 714.667 Q78.8057 719.409 70.212 719.409 Q61.491 719.409 56.4939 714.635 Q51.4968 709.829 51.4968 701.49 Q51.4968 698.784 52.0697 696.206 Q52.6108 693.628 53.7248 691.209 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip430)" d="M 0 0 M38.479 685.289 L38.479 679.401 L67.7294 679.401 L52.3562 661.927 L52.3562 654.447 L69.0344 673.353 L88.0042 653.651 L88.0042 661.29 L70.5939 679.401 L88.0042 679.401 L88.0042 685.289 L38.479 685.289 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip432)" style="stroke:#009af9; stroke-width:4; stroke-opacity:1; fill:none" points="
  285.09,1384.24 385.462,1324.43 485.834,1206.6 586.206,977.926 686.578,547.257 786.95,846.44 887.322,307.463 987.695,363.029 1088.07,671.244 1188.44,1120.54 
  1288.81,813.81 1389.18,248.842 1489.56,316.756 1589.93,511.041 1690.3,700.406 1790.67,1074.87 1891.04,727.73 1991.42,95.8851 2091.79,87.35 2192.16,86.1857 
  2292.53,277.703 
  "/>
</svg>
<h3 id="Add-in-some-bureaucracy"><a class="docs-heading-anchor" href="#Add-in-some-bureaucracy">Add in some bureaucracy</a><a id="Add-in-some-bureaucracy-1"></a><a class="docs-heading-anchor-permalink" href="#Add-in-some-bureaucracy" title="Permalink"></a></h3><p>OK, so let&#39;s add in some annoyances for the fishers. Of course, they wish to go out and catch regularly, but regulators only want to do their job once a year! Since it&#39;s the regulators who will monitor the total stock condition and advise fishers as to whether or not they can continue fishing, a systematic blind spot is inadvertently introduced into the system. Yearly catch and regulation occur on one day a year, whilst the stock will of course grow on a daily basis.</p><p>To achieve this, we extend the model like so:</p><pre><code class="language-julia">function agent_step!(agent, model)
    if model.tick % 365 == 0
        agent.yearly_catch = rand(Poisson(agent.competence))
    end
end

function dstock(model)
    # Only allow fishing if stocks are high enough
    # (monitored yearly, so this will return 0 364 days of the year)
    h = model.tick % 365 == 0 &amp;&amp; model.stock &gt; model.min_threshold ?
        sum(a.yearly_catch for a in allagents(model)) : 0.0

    model.stock * (1 - (model.stock / model.max_population)) - h
end

function model_step!(model)
    model.tick += 1
    model.stock += dstock(model)
end

function initialise(;
    stock = 400.0, # Initial population of fish (lets move to an equilibrium position)
    max_population = 500.0, # Maximum value of fish stock
    min_threshold = 60.0, # Regulate fishing if population drops below this value
    nagents = 50,
)
    model = ABM(
        Fisher;
        properties = Dict(
            :stock =&gt; stock,
            :max_population =&gt; max_population,
            :min_threshold =&gt; min_threshold,
            :tick =&gt; 0, # Time keeper in units of days
        ),
    )
    for _ in 1:nagents
        add_agent!(model, floor(rand(truncated(LogNormal(), 1, 6))), 0.0)
    end
    model
end</code></pre><p>Now that our model is running with a daily timestep, we must extend the run length value, and we&#39;ll also start from a steady state population.</p><pre><code class="language-julia">model = initialise()
yearly(model, s) = s % 365 == 0
_, results =
    run!(model, agent_step!, model_step!, 20 * 365; mdata = [:stock], when = yearly)

plot(results.stock; legend = false, ylabel = &quot;Stock&quot;, xlabel = &quot;Year&quot;)</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip490">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip490)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip491">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip490)" d="
M229.473 1423.18 L2352.76 1423.18 L2352.76 47.2441 L229.473 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip492">
    <rect x="229" y="47" width="2124" height="1377"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip492)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  690.185,1423.18 690.185,47.2441 
  "/>
<polyline clip-path="url(#clip492)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1190.96,1423.18 1190.96,47.2441 
  "/>
<polyline clip-path="url(#clip492)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1691.73,1423.18 1691.73,47.2441 
  "/>
<polyline clip-path="url(#clip492)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  2192.51,1423.18 2192.51,47.2441 
  "/>
<polyline clip-path="url(#clip492)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.473,1234.46 2352.76,1234.46 
  "/>
<polyline clip-path="url(#clip492)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.473,984.837 2352.76,984.837 
  "/>
<polyline clip-path="url(#clip492)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.473,735.212 2352.76,735.212 
  "/>
<polyline clip-path="url(#clip492)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.473,485.586 2352.76,485.586 
  "/>
<polyline clip-path="url(#clip492)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.473,235.961 2352.76,235.961 
  "/>
<polyline clip-path="url(#clip490)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.473,1423.18 2352.76,1423.18 
  "/>
<polyline clip-path="url(#clip490)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.473,1423.18 229.473,47.2441 
  "/>
<polyline clip-path="url(#clip490)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  690.185,1423.18 690.185,1406.67 
  "/>
<polyline clip-path="url(#clip490)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1190.96,1423.18 1190.96,1406.67 
  "/>
<polyline clip-path="url(#clip490)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1691.73,1423.18 1691.73,1406.67 
  "/>
<polyline clip-path="url(#clip490)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  2192.51,1423.18 2192.51,1406.67 
  "/>
<polyline clip-path="url(#clip490)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.473,1234.46 254.952,1234.46 
  "/>
<polyline clip-path="url(#clip490)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.473,984.837 254.952,984.837 
  "/>
<polyline clip-path="url(#clip490)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.473,735.212 254.952,735.212 
  "/>
<polyline clip-path="url(#clip490)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.473,485.586 254.952,485.586 
  "/>
<polyline clip-path="url(#clip490)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.473,235.961 254.952,235.961 
  "/>
<path clip-path="url(#clip490)" d="M 0 0 M680.463 1442.09 L698.819 1442.09 L698.819 1446.03 L684.745 1446.03 L684.745 1454.5 Q685.764 1454.15 686.782 1453.99 Q687.801 1453.8 688.819 1453.8 Q694.606 1453.8 697.986 1456.98 Q701.366 1460.15 701.366 1465.56 Q701.366 1471.14 697.893 1474.24 Q694.421 1477.32 688.102 1477.32 Q685.926 1477.32 683.657 1476.95 Q681.412 1476.58 679.005 1475.84 L679.005 1471.14 Q681.088 1472.28 683.31 1472.83 Q685.532 1473.39 688.009 1473.39 Q692.014 1473.39 694.352 1471.28 Q696.69 1469.18 696.69 1465.56 Q696.69 1461.95 694.352 1459.85 Q692.014 1457.74 688.009 1457.74 Q686.134 1457.74 684.259 1458.16 Q682.407 1458.57 680.463 1459.45 L680.463 1442.09 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M1167.83 1472.72 L1175.47 1472.72 L1175.47 1446.35 L1167.16 1448.02 L1167.16 1443.76 L1175.43 1442.09 L1180.1 1442.09 L1180.1 1472.72 L1187.74 1472.72 L1187.74 1476.65 L1167.83 1476.65 L1167.83 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M1202.81 1445.17 Q1199.2 1445.17 1197.37 1448.74 Q1195.57 1452.28 1195.57 1459.41 Q1195.57 1466.51 1197.37 1470.08 Q1199.2 1473.62 1202.81 1473.62 Q1206.45 1473.62 1208.25 1470.08 Q1210.08 1466.51 1210.08 1459.41 Q1210.08 1452.28 1208.25 1448.74 Q1206.45 1445.17 1202.81 1445.17 M1202.81 1441.47 Q1208.62 1441.47 1211.68 1446.07 Q1214.76 1450.66 1214.76 1459.41 Q1214.76 1468.13 1211.68 1472.74 Q1208.62 1477.32 1202.81 1477.32 Q1197 1477.32 1193.92 1472.74 Q1190.87 1468.13 1190.87 1459.41 Q1190.87 1450.66 1193.92 1446.07 Q1197 1441.47 1202.81 1441.47 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M1669.11 1472.72 L1676.75 1472.72 L1676.75 1446.35 L1668.44 1448.02 L1668.44 1443.76 L1676.7 1442.09 L1681.38 1442.09 L1681.38 1472.72 L1689.01 1472.72 L1689.01 1476.65 L1669.11 1476.65 L1669.11 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M1694.13 1442.09 L1712.49 1442.09 L1712.49 1446.03 L1698.41 1446.03 L1698.41 1454.5 Q1699.43 1454.15 1700.45 1453.99 Q1701.47 1453.8 1702.49 1453.8 Q1708.27 1453.8 1711.65 1456.98 Q1715.03 1460.15 1715.03 1465.56 Q1715.03 1471.14 1711.56 1474.24 Q1708.09 1477.32 1701.77 1477.32 Q1699.59 1477.32 1697.32 1476.95 Q1695.08 1476.58 1692.67 1475.84 L1692.67 1471.14 Q1694.75 1472.28 1696.98 1472.83 Q1699.2 1473.39 1701.68 1473.39 Q1705.68 1473.39 1708.02 1471.28 Q1710.36 1469.18 1710.36 1465.56 Q1710.36 1461.95 1708.02 1459.85 Q1705.68 1457.74 1701.68 1457.74 Q1699.8 1457.74 1697.93 1458.16 Q1696.07 1458.57 1694.13 1459.45 L1694.13 1442.09 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M2173.65 1472.72 L2189.97 1472.72 L2189.97 1476.65 L2168.03 1476.65 L2168.03 1472.72 Q2170.69 1469.96 2175.27 1465.33 Q2179.88 1460.68 2181.06 1459.34 Q2183.31 1456.81 2184.19 1455.08 Q2185.09 1453.32 2185.09 1451.63 Q2185.09 1448.87 2183.14 1447.14 Q2181.22 1445.4 2178.12 1445.4 Q2175.92 1445.4 2173.47 1446.17 Q2171.04 1446.93 2168.26 1448.48 L2168.26 1443.76 Q2171.08 1442.62 2173.54 1442.05 Q2175.99 1441.47 2178.03 1441.47 Q2183.4 1441.47 2186.59 1444.15 Q2189.79 1446.84 2189.79 1451.33 Q2189.79 1453.46 2188.98 1455.38 Q2188.19 1457.28 2186.08 1459.87 Q2185.51 1460.54 2182.4 1463.76 Q2179.3 1466.95 2173.65 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M2205.04 1445.17 Q2201.43 1445.17 2199.6 1448.74 Q2197.8 1452.28 2197.8 1459.41 Q2197.8 1466.51 2199.6 1470.08 Q2201.43 1473.62 2205.04 1473.62 Q2208.68 1473.62 2210.48 1470.08 Q2212.31 1466.51 2212.31 1459.41 Q2212.31 1452.28 2210.48 1448.74 Q2208.68 1445.17 2205.04 1445.17 M2205.04 1441.47 Q2210.85 1441.47 2213.91 1446.07 Q2216.99 1450.66 2216.99 1459.41 Q2216.99 1468.13 2213.91 1472.74 Q2210.85 1477.32 2205.04 1477.32 Q2199.23 1477.32 2196.15 1472.74 Q2193.1 1468.13 2193.1 1459.41 Q2193.1 1450.66 2196.15 1446.07 Q2199.23 1441.47 2205.04 1441.47 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M141.862 1221.26 L130.056 1239.71 L141.862 1239.71 L141.862 1221.26 M140.635 1217.18 L146.515 1217.18 L146.515 1239.71 L151.445 1239.71 L151.445 1243.59 L146.515 1243.59 L146.515 1251.74 L141.862 1251.74 L141.862 1243.59 L126.26 1243.59 L126.26 1239.08 L140.635 1217.18 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M166.515 1220.26 Q162.903 1220.26 161.075 1223.83 Q159.269 1227.37 159.269 1234.5 Q159.269 1241.6 161.075 1245.17 Q162.903 1248.71 166.515 1248.71 Q170.149 1248.71 171.954 1245.17 Q173.783 1241.6 173.783 1234.5 Q173.783 1227.37 171.954 1223.83 Q170.149 1220.26 166.515 1220.26 M166.515 1216.56 Q172.325 1216.56 175.38 1221.16 Q178.459 1225.75 178.459 1234.5 Q178.459 1243.22 175.38 1247.83 Q172.325 1252.41 166.515 1252.41 Q160.704 1252.41 157.626 1247.83 Q154.57 1243.22 154.57 1234.5 Q154.57 1225.75 157.626 1221.16 Q160.704 1216.56 166.515 1216.56 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M193.528 1220.26 Q189.917 1220.26 188.089 1223.83 Q186.283 1227.37 186.283 1234.5 Q186.283 1241.6 188.089 1245.17 Q189.917 1248.71 193.528 1248.71 Q197.163 1248.71 198.968 1245.17 Q200.797 1241.6 200.797 1234.5 Q200.797 1227.37 198.968 1223.83 Q197.163 1220.26 193.528 1220.26 M193.528 1216.56 Q199.338 1216.56 202.394 1221.16 Q205.473 1225.75 205.473 1234.5 Q205.473 1243.22 202.394 1247.83 Q199.338 1252.41 193.528 1252.41 Q187.718 1252.41 184.639 1247.83 Q181.584 1243.22 181.584 1234.5 Q181.584 1225.75 184.639 1221.16 Q187.718 1216.56 193.528 1216.56 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M142.857 971.632 L131.052 990.08 L142.857 990.08 L142.857 971.632 M141.63 967.557 L147.51 967.557 L147.51 990.08 L152.441 990.08 L152.441 993.969 L147.51 993.969 L147.51 1002.12 L142.857 1002.12 L142.857 993.969 L127.256 993.969 L127.256 989.455 L141.63 967.557 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M167.51 970.636 Q163.899 970.636 162.07 974.201 Q160.265 977.743 160.265 984.872 Q160.265 991.979 162.07 995.543 Q163.899 999.085 167.51 999.085 Q171.144 999.085 172.95 995.543 Q174.778 991.979 174.778 984.872 Q174.778 977.743 172.95 974.201 Q171.144 970.636 167.51 970.636 M167.51 966.932 Q173.32 966.932 176.376 971.539 Q179.454 976.122 179.454 984.872 Q179.454 993.599 176.376 998.205 Q173.32 1002.79 167.51 1002.79 Q161.7 1002.79 158.621 998.205 Q155.566 993.599 155.566 984.872 Q155.566 976.122 158.621 971.539 Q161.7 966.932 167.51 966.932 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M184.57 967.557 L202.926 967.557 L202.926 971.493 L188.852 971.493 L188.852 979.965 Q189.871 979.618 190.889 979.456 Q191.908 979.27 192.926 979.27 Q198.713 979.27 202.093 982.442 Q205.473 985.613 205.473 991.03 Q205.473 996.608 202 999.71 Q198.528 1002.79 192.209 1002.79 Q190.033 1002.79 187.764 1002.42 Q185.519 1002.05 183.112 1001.31 L183.112 996.608 Q185.195 997.742 187.417 998.298 Q189.639 998.854 192.116 998.854 Q196.121 998.854 198.459 996.747 Q200.797 994.641 200.797 991.03 Q200.797 987.418 198.459 985.312 Q196.121 983.206 192.116 983.206 Q190.241 983.206 188.366 983.622 Q186.514 984.039 184.57 984.918 L184.57 967.557 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M143.089 722.006 L131.283 740.455 L143.089 740.455 L143.089 722.006 M141.862 717.932 L147.742 717.932 L147.742 740.455 L152.672 740.455 L152.672 744.344 L147.742 744.344 L147.742 752.492 L143.089 752.492 L143.089 744.344 L127.487 744.344 L127.487 739.83 L141.862 717.932 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M158.552 748.557 L166.19 748.557 L166.19 722.191 L157.88 723.858 L157.88 719.599 L166.144 717.932 L170.82 717.932 L170.82 748.557 L178.459 748.557 L178.459 752.492 L158.552 752.492 L158.552 748.557 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M193.528 721.011 Q189.917 721.011 188.089 724.575 Q186.283 728.117 186.283 735.247 Q186.283 742.353 188.089 745.918 Q189.917 749.46 193.528 749.46 Q197.163 749.46 198.968 745.918 Q200.797 742.353 200.797 735.247 Q200.797 728.117 198.968 724.575 Q197.163 721.011 193.528 721.011 M193.528 717.307 Q199.338 717.307 202.394 721.913 Q205.473 726.497 205.473 735.247 Q205.473 743.973 202.394 748.58 Q199.338 753.163 193.528 753.163 Q187.718 753.163 184.639 748.58 Q181.584 743.973 181.584 735.247 Q181.584 726.497 184.639 721.913 Q187.718 717.307 193.528 717.307 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M144.084 472.381 L132.279 490.829 L144.084 490.829 L144.084 472.381 M142.857 468.306 L148.737 468.306 L148.737 490.829 L153.667 490.829 L153.667 494.718 L148.737 494.718 L148.737 502.866 L144.084 502.866 L144.084 494.718 L128.482 494.718 L128.482 490.205 L142.857 468.306 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M159.547 498.931 L167.186 498.931 L167.186 472.566 L158.876 474.232 L158.876 469.973 L167.14 468.306 L171.815 468.306 L171.815 498.931 L179.454 498.931 L179.454 502.866 L159.547 502.866 L159.547 498.931 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M184.57 468.306 L202.926 468.306 L202.926 472.242 L188.852 472.242 L188.852 480.714 Q189.871 480.367 190.889 480.205 Q191.908 480.019 192.926 480.019 Q198.713 480.019 202.093 483.191 Q205.473 486.362 205.473 491.779 Q205.473 497.357 202 500.459 Q198.528 503.538 192.209 503.538 Q190.033 503.538 187.764 503.167 Q185.519 502.797 183.112 502.056 L183.112 497.357 Q185.195 498.491 187.417 499.047 Q189.639 499.603 192.116 499.603 Q196.121 499.603 198.459 497.496 Q200.797 495.39 200.797 491.779 Q200.797 488.167 198.459 486.061 Q196.121 483.955 192.116 483.955 Q190.241 483.955 188.366 484.371 Q186.514 484.788 184.57 485.667 L184.57 468.306 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M143.459 222.755 L131.654 241.204 L143.459 241.204 L143.459 222.755 M142.232 218.681 L148.112 218.681 L148.112 241.204 L153.042 241.204 L153.042 245.093 L148.112 245.093 L148.112 253.241 L143.459 253.241 L143.459 245.093 L127.857 245.093 L127.857 240.579 L142.232 218.681 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M162.14 249.306 L178.459 249.306 L178.459 253.241 L156.515 253.241 L156.515 249.306 Q159.177 246.551 163.76 241.922 Q168.366 237.269 169.547 235.926 Q171.792 233.403 172.672 231.667 Q173.575 229.908 173.575 228.218 Q173.575 225.463 171.63 223.727 Q169.709 221.991 166.607 221.991 Q164.408 221.991 161.954 222.755 Q159.524 223.519 156.746 225.07 L156.746 220.348 Q159.57 219.213 162.024 218.635 Q164.478 218.056 166.515 218.056 Q171.885 218.056 175.079 220.741 Q178.274 223.426 178.274 227.917 Q178.274 230.047 177.464 231.968 Q176.677 233.866 174.57 236.459 Q173.991 237.13 170.89 240.348 Q167.788 243.542 162.14 249.306 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M193.528 221.76 Q189.917 221.76 188.089 225.324 Q186.283 228.866 186.283 235.996 Q186.283 243.102 188.089 246.667 Q189.917 250.209 193.528 250.209 Q197.163 250.209 198.968 246.667 Q200.797 243.102 200.797 235.996 Q200.797 228.866 198.968 225.324 Q197.163 221.76 193.528 221.76 M193.528 218.056 Q199.338 218.056 202.394 222.662 Q205.473 227.246 205.473 235.996 Q205.473 244.722 202.394 249.329 Q199.338 253.912 193.528 253.912 Q187.718 253.912 184.639 249.329 Q181.584 244.722 181.584 235.996 Q181.584 227.246 184.639 222.662 Q187.718 218.056 193.528 218.056 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M1226.68 1508.52 L1233.58 1508.52 L1246.76 1528.07 L1259.84 1508.52 L1266.75 1508.52 L1249.94 1533.41 L1249.94 1556.04 L1243.48 1556.04 L1243.48 1533.41 L1226.68 1508.52 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M1294.73 1536.76 L1294.73 1539.62 L1267.8 1539.62 Q1268.18 1545.67 1271.43 1548.85 Q1274.71 1552 1280.53 1552 Q1283.91 1552 1287.06 1551.17 Q1290.24 1550.35 1293.36 1548.69 L1293.36 1554.23 Q1290.21 1555.57 1286.9 1556.27 Q1283.59 1556.97 1280.18 1556.97 Q1271.65 1556.97 1266.65 1552 Q1261.69 1547.04 1261.69 1538.57 Q1261.69 1529.82 1266.4 1524.69 Q1271.14 1519.54 1279.16 1519.54 Q1286.36 1519.54 1290.53 1524.18 Q1294.73 1528.8 1294.73 1536.76 M1288.87 1535.04 Q1288.81 1530.23 1286.16 1527.37 Q1283.56 1524.5 1279.23 1524.5 Q1274.32 1524.5 1271.36 1527.27 Q1268.44 1530.04 1267.99 1535.07 L1288.87 1535.04 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M1317.07 1538.12 Q1309.97 1538.12 1307.24 1539.75 Q1304.5 1541.37 1304.5 1545.29 Q1304.5 1548.4 1306.54 1550.25 Q1308.6 1552.07 1312.14 1552.07 Q1317.01 1552.07 1319.94 1548.63 Q1322.9 1545.16 1322.9 1539.43 L1322.9 1538.12 L1317.07 1538.12 M1328.75 1535.71 L1328.75 1556.04 L1322.9 1556.04 L1322.9 1550.63 Q1320.89 1553.88 1317.9 1555.44 Q1314.91 1556.97 1310.58 1556.97 Q1305.1 1556.97 1301.86 1553.91 Q1298.64 1550.82 1298.64 1545.67 Q1298.64 1539.65 1302.65 1536.6 Q1306.69 1533.54 1314.68 1533.54 L1322.9 1533.54 L1322.9 1532.97 Q1322.9 1528.93 1320.22 1526.73 Q1317.58 1524.5 1312.77 1524.5 Q1309.72 1524.5 1306.82 1525.23 Q1303.93 1525.97 1301.25 1527.43 L1301.25 1522.02 Q1304.47 1520.78 1307.49 1520.17 Q1310.51 1519.54 1313.38 1519.54 Q1321.11 1519.54 1324.93 1523.55 Q1328.75 1527.56 1328.75 1535.71 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M1355.55 1525.87 Q1354.56 1525.3 1353.39 1525.04 Q1352.24 1524.76 1350.84 1524.76 Q1345.88 1524.76 1343.2 1528 Q1340.56 1531.22 1340.56 1537.27 L1340.56 1556.04 L1334.67 1556.04 L1334.67 1520.4 L1340.56 1520.4 L1340.56 1525.93 Q1342.41 1522.69 1345.37 1521.13 Q1348.33 1519.54 1352.56 1519.54 Q1353.16 1519.54 1353.9 1519.63 Q1354.63 1519.7 1355.52 1519.85 L1355.55 1525.87 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M42.0438 786.185 L48.314 786.185 Q46.5634 789.846 45.704 793.092 Q44.8447 796.339 44.8447 799.362 Q44.8447 804.614 46.8817 807.479 Q48.9187 810.311 52.6745 810.311 Q55.8255 810.311 57.4488 808.434 Q59.0402 806.524 60.0269 801.24 L60.8226 797.357 Q62.1912 790.164 65.6605 786.758 Q69.098 783.321 74.8908 783.321 Q81.7976 783.321 85.3624 787.968 Q88.9272 792.583 88.9272 801.527 Q88.9272 804.901 88.1633 808.72 Q87.3994 812.508 85.9035 816.582 L79.2831 816.582 Q81.4793 812.667 82.5933 808.911 Q83.7073 805.155 83.7073 801.527 Q83.7073 796.02 81.543 793.028 Q79.3786 790.037 75.3682 790.037 Q71.8671 790.037 69.8937 792.201 Q67.9204 794.333 66.9337 799.235 L66.1698 803.15 Q64.7375 810.343 61.682 813.558 Q58.6264 816.773 53.1837 816.773 Q46.8817 816.773 43.2532 812.348 Q39.6248 807.892 39.6248 800.094 Q39.6248 796.752 40.2295 793.283 Q40.8343 789.814 42.0438 786.185 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M42.2347 771.385 L52.3562 771.385 L52.3562 759.322 L56.9077 759.322 L56.9077 771.385 L76.2594 771.385 Q80.6199 771.385 81.8613 770.207 Q83.1026 768.998 83.1026 765.338 L83.1026 759.322 L88.0042 759.322 L88.0042 765.338 Q88.0042 772.117 85.4897 774.695 Q82.9434 777.273 76.2594 777.273 L56.9077 777.273 L56.9077 781.57 L52.3562 781.57 L52.3562 777.273 L42.2347 777.273 L42.2347 771.385 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M56.4621 739.366 Q56.4621 744.076 60.1542 746.813 Q63.8145 749.551 70.212 749.551 Q76.6095 749.551 80.3017 746.845 Q83.9619 744.108 83.9619 739.366 Q83.9619 734.687 80.2698 731.95 Q76.5777 729.212 70.212 729.212 Q63.8781 729.212 60.186 731.95 Q56.4621 734.687 56.4621 739.366 M51.4968 739.366 Q51.4968 731.727 56.4621 727.366 Q61.4273 723.006 70.212 723.006 Q78.9649 723.006 83.9619 727.366 Q88.9272 731.727 88.9272 739.366 Q88.9272 747.036 83.9619 751.397 Q78.9649 755.725 70.212 755.725 Q61.4273 755.725 56.4621 751.397 Q51.4968 747.036 51.4968 739.366 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M53.7248 691.209 L59.1993 691.209 Q57.8307 693.692 57.1623 696.206 Q56.4621 698.689 56.4621 701.235 Q56.4621 706.932 60.0905 710.083 Q63.6872 713.234 70.212 713.234 Q76.7369 713.234 80.3653 710.083 Q83.9619 706.932 83.9619 701.235 Q83.9619 698.689 83.2935 696.206 Q82.5933 693.692 81.2247 691.209 L86.6355 691.209 Q87.7814 693.66 88.3543 696.302 Q88.9272 698.912 88.9272 701.872 Q88.9272 709.924 83.8664 714.667 Q78.8057 719.409 70.212 719.409 Q61.491 719.409 56.4939 714.635 Q51.4968 709.829 51.4968 701.49 Q51.4968 698.784 52.0697 696.206 Q52.6108 693.628 53.7248 691.209 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip490)" d="M 0 0 M38.479 685.289 L38.479 679.401 L67.7294 679.401 L52.3562 661.927 L52.3562 654.447 L69.0344 673.353 L88.0042 653.651 L88.0042 661.29 L70.5939 679.401 L88.0042 679.401 L88.0042 685.289 L38.479 685.289 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip492)" style="stroke:#009af9; stroke-width:4; stroke-opacity:1; fill:none" points="
  289.566,1234.46 389.72,685.287 489.875,835.062 590.03,385.736 690.185,785.137 790.34,635.362 890.495,86.1857 990.65,285.886 1090.8,1184.54 1190.96,884.987 
  1291.11,735.212 1391.27,735.212 1491.42,485.586 1591.58,835.062 1691.73,285.886 1791.89,485.586 1892.04,435.661 1992.2,485.586 2092.35,535.512 2192.51,585.437 
  2292.66,1384.24 
  "/>
</svg>
<h3 id="Baseline-benchmark"><a class="docs-heading-anchor" href="#Baseline-benchmark">Baseline benchmark</a><a id="Baseline-benchmark-1"></a><a class="docs-heading-anchor-permalink" href="#Baseline-benchmark" title="Permalink"></a></h3><p>Lets get a baseline performance result for our model.</p><pre><code class="language-julia">using BenchmarkTools

@btime Agents.step!(model, agent_step!, model_step!, 20 * 365) setup =
    (model = initialise())</code></pre><pre><code class="language-none">  19.736 ms (64698 allocations: 1010.91 KiB)</code></pre><p>So this is fairly quick since the model is a simple one, but it&#39;s certainly not as efficient as it could be. We calculate the stock value every single day, since the forward Eulerian method requires us to, so it can evolve correctly. In addition to this, Eulerian expansion introduces uncertainty into our results, which is tied to the choice of step size. For accurate results, one should never really use this approximate method - although it is almost ubiquitous throughout contemporary research code. For a thorough exposé on this, have a read of <a href="https://nextjournal.com/ChrisRackauckas/why-you-shouldnt-use-eulers-method-to-solve-odes">Why you shouldn&#39;t use Eulers method to solve ODEs</a>.</p><h2 id="Coupling-DifferentialEquations.jl-to-Agents.jl"><a class="docs-heading-anchor" href="#Coupling-DifferentialEquations.jl-to-Agents.jl">Coupling DifferentialEquations.jl to Agents.jl</a><a id="Coupling-DifferentialEquations.jl-to-Agents.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Coupling-DifferentialEquations.jl-to-Agents.jl" title="Permalink"></a></h2><p>Lets therefore modify our system to solve the logistic equation in a continuous context, but discretely monitor and harvest.</p><pre><code class="language-julia">import DifferentialEquations

function agent_diffeq_step!(agent, model)
    agent.yearly_catch = rand(Poisson(agent.competence))
end

function model_diffeq_step!(model)
    # We step 364 days with this call.
    DifferentialEquations.step!(model.i, 364.0, true)
    # Only allow fishing if stocks are high enough
    model.i.p[2] =
        model.i.u[1] &gt; model.min_threshold ? sum(a.yearly_catch for a in allagents(model)) :
        0.0
    # Then apply our catch modifier
    DifferentialEquations.step!(model.i, 1.0, true)
    # Store yearly stock in the model for plotting
    model.stock = model.i.u[1]
    # And reset for the next year
    model.i.p[2] = 0.0
end

function initialise_diffeq(;
    stock = 400.0, # Initial population of fish (lets move to an equilibrium position)
    max_population = 500.0, # Maximum value of fish stock
    min_threshold = 60.0, # Regulate fishing if population drops below this value
    nagents = 50,
)

    function fish_stock!(ds, s, p, t)
        max_population, h = p
        ds[1] = s[1] * (1 - (s[1] / max_population)) - h
    end
    prob = DifferentialEquations.ODEProblem(
        fish_stock!,
        [stock],
        (0.0, Inf),
        [max_population, 0.0],
    )
    integrator = DifferentialEquations.init(
        prob,
        DifferentialEquations.Tsit5();
        advance_to_tstop = true,
    )

    model = ABM(
        Fisher;
        properties = Dict(
            :stock =&gt; stock,
            :max_population =&gt; max_population,
            :min_threshold =&gt; min_threshold,
            :i =&gt; integrator, # The DifferentialEquations integrator
        ),
    )
    for _ in 1:nagents
        add_agent!(model, floor(rand(truncated(LogNormal(), 1, 6))), 0.0)
    end
    model
end</code></pre><p>Notice that we&#39;ve reverted back to a yearly rather than daily timestep here, since the ODE solver is now in charge of evolving the logistic function forward. We&#39;ve used the <a href="https://docs.sciml.ai/stable/basics/integrator/">integrator interface</a> to achieve this.</p><p>This implementation uses <code>import</code> to explicitly identify which functions are from <code>DifferentialEquations</code> and not <code>Agents</code>. However, since both <code>Agents</code> and <code>DifferentialEquations</code> provide a <code>step!</code> function, each use must be qualified explicitly if one were to choose to bring all of <code>DifferentialEquations</code> into scope via the <code>using</code> keyword.</p><pre><code class="language-julia">modeldeq = initialise_diffeq()
_, resultsdeq = run!(modeldeq, agent_diffeq_step!, model_diffeq_step!, 20; mdata = [:stock])

plot(resultsdeq.stock; legend = false, ylabel = &quot;Stock&quot;, xlabel = &quot;Year&quot;)</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip550">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip550)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip551">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip550)" d="
M229.959 1423.18 L2352.76 1423.18 L2352.76 47.2441 L229.959 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip552">
    <rect x="229" y="47" width="2124" height="1377"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip552)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  690.566,1423.18 690.566,47.2441 
  "/>
<polyline clip-path="url(#clip552)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1191.23,1423.18 1191.23,47.2441 
  "/>
<polyline clip-path="url(#clip552)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1691.89,1423.18 1691.89,47.2441 
  "/>
<polyline clip-path="url(#clip552)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  2192.54,1423.18 2192.54,47.2441 
  "/>
<polyline clip-path="url(#clip552)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.959,1384.24 2352.76,1384.24 
  "/>
<polyline clip-path="url(#clip552)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.959,1130.54 2352.76,1130.54 
  "/>
<polyline clip-path="url(#clip552)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.959,876.846 2352.76,876.846 
  "/>
<polyline clip-path="url(#clip552)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.959,623.15 2352.76,623.15 
  "/>
<polyline clip-path="url(#clip552)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.959,369.453 2352.76,369.453 
  "/>
<polyline clip-path="url(#clip552)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.959,115.757 2352.76,115.757 
  "/>
<polyline clip-path="url(#clip550)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,1423.18 2352.76,1423.18 
  "/>
<polyline clip-path="url(#clip550)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,1423.18 229.959,47.2441 
  "/>
<polyline clip-path="url(#clip550)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  690.566,1423.18 690.566,1406.67 
  "/>
<polyline clip-path="url(#clip550)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1191.23,1423.18 1191.23,1406.67 
  "/>
<polyline clip-path="url(#clip550)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1691.89,1423.18 1691.89,1406.67 
  "/>
<polyline clip-path="url(#clip550)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  2192.54,1423.18 2192.54,1406.67 
  "/>
<polyline clip-path="url(#clip550)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,1384.24 255.432,1384.24 
  "/>
<polyline clip-path="url(#clip550)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,1130.54 255.432,1130.54 
  "/>
<polyline clip-path="url(#clip550)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,876.846 255.432,876.846 
  "/>
<polyline clip-path="url(#clip550)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,623.15 255.432,623.15 
  "/>
<polyline clip-path="url(#clip550)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,369.453 255.432,369.453 
  "/>
<polyline clip-path="url(#clip550)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,115.757 255.432,115.757 
  "/>
<path clip-path="url(#clip550)" d="M 0 0 M680.844 1442.09 L699.2 1442.09 L699.2 1446.03 L685.126 1446.03 L685.126 1454.5 Q686.144 1454.15 687.163 1453.99 Q688.181 1453.8 689.2 1453.8 Q694.987 1453.8 698.367 1456.98 Q701.746 1460.15 701.746 1465.56 Q701.746 1471.14 698.274 1474.24 Q694.802 1477.32 688.482 1477.32 Q686.306 1477.32 684.038 1476.95 Q681.793 1476.58 679.385 1475.84 L679.385 1471.14 Q681.469 1472.28 683.691 1472.83 Q685.913 1473.39 688.39 1473.39 Q692.394 1473.39 694.732 1471.28 Q697.07 1469.18 697.07 1465.56 Q697.07 1461.95 694.732 1459.85 Q692.394 1457.74 688.39 1457.74 Q686.515 1457.74 684.64 1458.16 Q682.788 1458.57 680.844 1459.45 L680.844 1442.09 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M1168.1 1472.72 L1175.74 1472.72 L1175.74 1446.35 L1167.43 1448.02 L1167.43 1443.76 L1175.69 1442.09 L1180.37 1442.09 L1180.37 1472.72 L1188.01 1472.72 L1188.01 1476.65 L1168.1 1476.65 L1168.1 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M1203.08 1445.17 Q1199.47 1445.17 1197.64 1448.74 Q1195.83 1452.28 1195.83 1459.41 Q1195.83 1466.51 1197.64 1470.08 Q1199.47 1473.62 1203.08 1473.62 Q1206.71 1473.62 1208.52 1470.08 Q1210.35 1466.51 1210.35 1459.41 Q1210.35 1452.28 1208.52 1448.74 Q1206.71 1445.17 1203.08 1445.17 M1203.08 1441.47 Q1208.89 1441.47 1211.94 1446.07 Q1215.02 1450.66 1215.02 1459.41 Q1215.02 1468.13 1211.94 1472.74 Q1208.89 1477.32 1203.08 1477.32 Q1197.27 1477.32 1194.19 1472.74 Q1191.13 1468.13 1191.13 1459.41 Q1191.13 1450.66 1194.19 1446.07 Q1197.27 1441.47 1203.08 1441.47 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M1669.26 1472.72 L1676.9 1472.72 L1676.9 1446.35 L1668.59 1448.02 L1668.59 1443.76 L1676.85 1442.09 L1681.53 1442.09 L1681.53 1472.72 L1689.17 1472.72 L1689.17 1476.65 L1669.26 1476.65 L1669.26 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M1694.28 1442.09 L1712.64 1442.09 L1712.64 1446.03 L1698.56 1446.03 L1698.56 1454.5 Q1699.58 1454.15 1700.6 1453.99 Q1701.62 1453.8 1702.64 1453.8 Q1708.42 1453.8 1711.8 1456.98 Q1715.18 1460.15 1715.18 1465.56 Q1715.18 1471.14 1711.71 1474.24 Q1708.24 1477.32 1701.92 1477.32 Q1699.74 1477.32 1697.48 1476.95 Q1695.23 1476.58 1692.82 1475.84 L1692.82 1471.14 Q1694.91 1472.28 1697.13 1472.83 Q1699.35 1473.39 1701.83 1473.39 Q1705.83 1473.39 1708.17 1471.28 Q1710.51 1469.18 1710.51 1465.56 Q1710.51 1461.95 1708.17 1459.85 Q1705.83 1457.74 1701.83 1457.74 Q1699.95 1457.74 1698.08 1458.16 Q1696.23 1458.57 1694.28 1459.45 L1694.28 1442.09 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M2173.69 1472.72 L2190.01 1472.72 L2190.01 1476.65 L2168.07 1476.65 L2168.07 1472.72 Q2170.73 1469.96 2175.31 1465.33 Q2179.92 1460.68 2181.1 1459.34 Q2183.34 1456.81 2184.22 1455.08 Q2185.13 1453.32 2185.13 1451.63 Q2185.13 1448.87 2183.18 1447.14 Q2181.26 1445.4 2178.16 1445.4 Q2175.96 1445.4 2173.51 1446.17 Q2171.08 1446.93 2168.3 1448.48 L2168.3 1443.76 Q2171.12 1442.62 2173.57 1442.05 Q2176.03 1441.47 2178.07 1441.47 Q2183.44 1441.47 2186.63 1444.15 Q2189.82 1446.84 2189.82 1451.33 Q2189.82 1453.46 2189.01 1455.38 Q2188.23 1457.28 2186.12 1459.87 Q2185.54 1460.54 2182.44 1463.76 Q2179.34 1466.95 2173.69 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M2205.08 1445.17 Q2201.47 1445.17 2199.64 1448.74 Q2197.83 1452.28 2197.83 1459.41 Q2197.83 1466.51 2199.64 1470.08 Q2201.47 1473.62 2205.08 1473.62 Q2208.71 1473.62 2210.52 1470.08 Q2212.35 1466.51 2212.35 1459.41 Q2212.35 1452.28 2210.52 1448.74 Q2208.71 1445.17 2205.08 1445.17 M2205.08 1441.47 Q2210.89 1441.47 2213.95 1446.07 Q2217.02 1450.66 2217.02 1459.41 Q2217.02 1468.13 2213.95 1472.74 Q2210.89 1477.32 2205.08 1477.32 Q2199.27 1477.32 2196.19 1472.74 Q2193.14 1468.13 2193.14 1459.41 Q2193.14 1450.66 2196.19 1446.07 Q2199.27 1441.47 2205.08 1441.47 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M142.348 1371.03 L130.543 1389.48 L142.348 1389.48 L142.348 1371.03 M141.121 1366.96 L147.001 1366.96 L147.001 1389.48 L151.931 1389.48 L151.931 1393.37 L147.001 1393.37 L147.001 1401.52 L142.348 1401.52 L142.348 1393.37 L126.746 1393.37 L126.746 1388.86 L141.121 1366.96 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M167.001 1370.04 Q163.39 1370.04 161.561 1373.6 Q159.755 1377.14 159.755 1384.27 Q159.755 1391.38 161.561 1394.94 Q163.39 1398.49 167.001 1398.49 Q170.635 1398.49 172.44 1394.94 Q174.269 1391.38 174.269 1384.27 Q174.269 1377.14 172.44 1373.6 Q170.635 1370.04 167.001 1370.04 M167.001 1366.33 Q172.811 1366.33 175.866 1370.94 Q178.945 1375.52 178.945 1384.27 Q178.945 1393 175.866 1397.61 Q172.811 1402.19 167.001 1402.19 Q161.191 1402.19 158.112 1397.61 Q155.056 1393 155.056 1384.27 Q155.056 1375.52 158.112 1370.94 Q161.191 1366.33 167.001 1366.33 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M194.014 1370.04 Q190.403 1370.04 188.575 1373.6 Q186.769 1377.14 186.769 1384.27 Q186.769 1391.38 188.575 1394.94 Q190.403 1398.49 194.014 1398.49 Q197.649 1398.49 199.454 1394.94 Q201.283 1391.38 201.283 1384.27 Q201.283 1377.14 199.454 1373.6 Q197.649 1370.04 194.014 1370.04 M194.014 1366.33 Q199.825 1366.33 202.88 1370.94 Q205.959 1375.52 205.959 1384.27 Q205.959 1393 202.88 1397.61 Q199.825 1402.19 194.014 1402.19 Q188.204 1402.19 185.126 1397.61 Q182.07 1393 182.07 1384.27 Q182.07 1375.52 185.126 1370.94 Q188.204 1366.33 194.014 1366.33 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M143.575 1117.34 L131.769 1135.79 L143.575 1135.79 L143.575 1117.34 M142.348 1113.26 L148.228 1113.26 L148.228 1135.79 L153.158 1135.79 L153.158 1139.67 L148.228 1139.67 L148.228 1147.82 L143.575 1147.82 L143.575 1139.67 L127.973 1139.67 L127.973 1135.16 L142.348 1113.26 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M159.038 1143.89 L166.677 1143.89 L166.677 1117.52 L158.366 1119.19 L158.366 1114.93 L166.63 1113.26 L171.306 1113.26 L171.306 1143.89 L178.945 1143.89 L178.945 1147.82 L159.038 1147.82 L159.038 1143.89 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M194.014 1116.34 Q190.403 1116.34 188.575 1119.91 Q186.769 1123.45 186.769 1130.58 Q186.769 1137.68 188.575 1141.25 Q190.403 1144.79 194.014 1144.79 Q197.649 1144.79 199.454 1141.25 Q201.283 1137.68 201.283 1130.58 Q201.283 1123.45 199.454 1119.91 Q197.649 1116.34 194.014 1116.34 M194.014 1112.64 Q199.825 1112.64 202.88 1117.24 Q205.959 1121.83 205.959 1130.58 Q205.959 1139.3 202.88 1143.91 Q199.825 1148.49 194.014 1148.49 Q188.204 1148.49 185.126 1143.91 Q182.07 1139.3 182.07 1130.58 Q182.07 1121.83 185.126 1117.24 Q188.204 1112.64 194.014 1112.64 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M143.945 863.64 L132.14 882.089 L143.945 882.089 L143.945 863.64 M142.718 859.566 L148.598 859.566 L148.598 882.089 L153.529 882.089 L153.529 885.978 L148.598 885.978 L148.598 894.126 L143.945 894.126 L143.945 885.978 L128.343 885.978 L128.343 881.464 L142.718 859.566 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M162.626 890.191 L178.945 890.191 L178.945 894.126 L157.001 894.126 L157.001 890.191 Q159.663 887.436 164.246 882.806 Q168.853 878.154 170.033 876.811 Q172.278 874.288 173.158 872.552 Q174.061 870.793 174.061 869.103 Q174.061 866.348 172.116 864.612 Q170.195 862.876 167.093 862.876 Q164.894 862.876 162.441 863.64 Q160.01 864.404 157.232 865.955 L157.232 861.233 Q160.056 860.098 162.51 859.52 Q164.964 858.941 167.001 858.941 Q172.371 858.941 175.565 861.626 Q178.76 864.311 178.76 868.802 Q178.76 870.932 177.95 872.853 Q177.163 874.751 175.056 877.344 Q174.477 878.015 171.376 881.232 Q168.274 884.427 162.626 890.191 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M194.014 862.645 Q190.403 862.645 188.575 866.209 Q186.769 869.751 186.769 876.881 Q186.769 883.987 188.575 887.552 Q190.403 891.093 194.014 891.093 Q197.649 891.093 199.454 887.552 Q201.283 883.987 201.283 876.881 Q201.283 869.751 199.454 866.209 Q197.649 862.645 194.014 862.645 M194.014 858.941 Q199.825 858.941 202.88 863.547 Q205.959 868.131 205.959 876.881 Q205.959 885.607 202.88 890.214 Q199.825 894.797 194.014 894.797 Q188.204 894.797 185.126 890.214 Q182.07 885.607 182.07 876.881 Q182.07 868.131 185.126 863.547 Q188.204 858.941 194.014 858.941 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M142.996 609.944 L131.191 628.393 L142.996 628.393 L142.996 609.944 M141.769 605.87 L147.649 605.87 L147.649 628.393 L152.579 628.393 L152.579 632.282 L147.649 632.282 L147.649 640.43 L142.996 640.43 L142.996 632.282 L127.394 632.282 L127.394 627.768 L141.769 605.87 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M171.815 621.796 Q175.172 622.513 177.047 624.782 Q178.945 627.05 178.945 630.383 Q178.945 635.499 175.427 638.3 Q171.908 641.101 165.427 641.101 Q163.251 641.101 160.936 640.661 Q158.644 640.244 156.191 639.388 L156.191 634.874 Q158.135 636.008 160.45 636.587 Q162.765 637.166 165.288 637.166 Q169.686 637.166 171.978 635.43 Q174.292 633.694 174.292 630.383 Q174.292 627.328 172.14 625.615 Q170.01 623.879 166.19 623.879 L162.163 623.879 L162.163 620.036 L166.376 620.036 Q169.825 620.036 171.653 618.671 Q173.482 617.282 173.482 614.689 Q173.482 612.027 171.584 610.615 Q169.709 609.18 166.19 609.18 Q164.269 609.18 162.07 609.597 Q159.871 610.013 157.232 610.893 L157.232 606.726 Q159.894 605.985 162.209 605.615 Q164.547 605.245 166.607 605.245 Q171.931 605.245 175.033 607.675 Q178.135 610.083 178.135 614.203 Q178.135 617.073 176.491 619.064 Q174.848 621.032 171.815 621.796 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M194.014 608.948 Q190.403 608.948 188.575 612.513 Q186.769 616.055 186.769 623.184 Q186.769 630.291 188.575 633.856 Q190.403 637.397 194.014 637.397 Q197.649 637.397 199.454 633.856 Q201.283 630.291 201.283 623.184 Q201.283 616.055 199.454 612.513 Q197.649 608.948 194.014 608.948 M194.014 605.245 Q199.825 605.245 202.88 609.851 Q205.959 614.434 205.959 623.184 Q205.959 631.911 202.88 636.518 Q199.825 641.101 194.014 641.101 Q188.204 641.101 185.126 636.518 Q182.07 631.911 182.07 623.184 Q182.07 614.434 185.126 609.851 Q188.204 605.245 194.014 605.245 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M141.862 356.248 L130.056 374.697 L141.862 374.697 L141.862 356.248 M140.635 352.173 L146.515 352.173 L146.515 374.697 L151.445 374.697 L151.445 378.585 L146.515 378.585 L146.515 386.733 L141.862 386.733 L141.862 378.585 L126.26 378.585 L126.26 374.072 L140.635 352.173 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M169.362 356.248 L157.556 374.697 L169.362 374.697 L169.362 356.248 M168.135 352.173 L174.015 352.173 L174.015 374.697 L178.945 374.697 L178.945 378.585 L174.015 378.585 L174.015 386.733 L169.362 386.733 L169.362 378.585 L153.76 378.585 L153.76 374.072 L168.135 352.173 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M194.014 355.252 Q190.403 355.252 188.575 358.817 Q186.769 362.359 186.769 369.488 Q186.769 376.595 188.575 380.159 Q190.403 383.701 194.014 383.701 Q197.649 383.701 199.454 380.159 Q201.283 376.595 201.283 369.488 Q201.283 362.359 199.454 358.817 Q197.649 355.252 194.014 355.252 M194.014 351.548 Q199.825 351.548 202.88 356.155 Q205.959 360.738 205.959 369.488 Q205.959 378.215 202.88 382.821 Q199.825 387.405 194.014 387.405 Q188.204 387.405 185.126 382.821 Q182.07 378.215 182.07 369.488 Q182.07 360.738 185.126 356.155 Q188.204 351.548 194.014 351.548 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M143.343 102.551 L131.538 121 L143.343 121 L143.343 102.551 M142.117 98.4773 L147.996 98.4773 L147.996 121 L152.927 121 L152.927 124.889 L147.996 124.889 L147.996 133.037 L143.343 133.037 L143.343 124.889 L127.742 124.889 L127.742 120.375 L142.117 98.4773 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M158.042 98.4773 L176.399 98.4773 L176.399 102.412 L162.325 102.412 L162.325 110.885 Q163.343 110.537 164.362 110.375 Q165.38 110.19 166.399 110.19 Q172.186 110.19 175.565 113.361 Q178.945 116.533 178.945 121.949 Q178.945 127.528 175.473 130.63 Q172.001 133.709 165.681 133.709 Q163.505 133.709 161.237 133.338 Q158.991 132.968 156.584 132.227 L156.584 127.528 Q158.667 128.662 160.89 129.218 Q163.112 129.773 165.589 129.773 Q169.593 129.773 171.931 127.667 Q174.269 125.56 174.269 121.949 Q174.269 118.338 171.931 116.232 Q169.593 114.125 165.589 114.125 Q163.714 114.125 161.839 114.542 Q159.987 114.959 158.042 115.838 L158.042 98.4773 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M194.014 101.556 Q190.403 101.556 188.575 105.121 Q186.769 108.662 186.769 115.792 Q186.769 122.898 188.575 126.463 Q190.403 130.005 194.014 130.005 Q197.649 130.005 199.454 126.463 Q201.283 122.898 201.283 115.792 Q201.283 108.662 199.454 105.121 Q197.649 101.556 194.014 101.556 M194.014 97.8523 Q199.825 97.8523 202.88 102.459 Q205.959 107.042 205.959 115.792 Q205.959 124.519 202.88 129.125 Q199.825 133.709 194.014 133.709 Q188.204 133.709 185.126 129.125 Q182.07 124.519 182.07 115.792 Q182.07 107.042 185.126 102.459 Q188.204 97.8523 194.014 97.8523 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M1226.92 1508.52 L1233.83 1508.52 L1247 1528.07 L1260.09 1508.52 L1266.99 1508.52 L1250.19 1533.41 L1250.19 1556.04 L1243.73 1556.04 L1243.73 1533.41 L1226.92 1508.52 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M1294.97 1536.76 L1294.97 1539.62 L1268.04 1539.62 Q1268.42 1545.67 1271.67 1548.85 Q1274.95 1552 1280.77 1552 Q1284.15 1552 1287.3 1551.17 Q1290.48 1550.35 1293.6 1548.69 L1293.6 1554.23 Q1290.45 1555.57 1287.14 1556.27 Q1283.83 1556.97 1280.42 1556.97 Q1271.89 1556.97 1266.9 1552 Q1261.93 1547.04 1261.93 1538.57 Q1261.93 1529.82 1266.64 1524.69 Q1271.38 1519.54 1279.41 1519.54 Q1286.6 1519.54 1290.77 1524.18 Q1294.97 1528.8 1294.97 1536.76 M1289.11 1535.04 Q1289.05 1530.23 1286.41 1527.37 Q1283.8 1524.5 1279.47 1524.5 Q1274.57 1524.5 1271.61 1527.27 Q1268.68 1530.04 1268.23 1535.07 L1289.11 1535.04 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M1317.31 1538.12 Q1310.22 1538.12 1307.48 1539.75 Q1304.74 1541.37 1304.74 1545.29 Q1304.74 1548.4 1306.78 1550.25 Q1308.85 1552.07 1312.38 1552.07 Q1317.25 1552.07 1320.18 1548.63 Q1323.14 1545.16 1323.14 1539.43 L1323.14 1538.12 L1317.31 1538.12 M1328.99 1535.71 L1328.99 1556.04 L1323.14 1556.04 L1323.14 1550.63 Q1321.13 1553.88 1318.14 1555.44 Q1315.15 1556.97 1310.82 1556.97 Q1305.35 1556.97 1302.1 1553.91 Q1298.88 1550.82 1298.88 1545.67 Q1298.88 1539.65 1302.9 1536.6 Q1306.94 1533.54 1314.93 1533.54 L1323.14 1533.54 L1323.14 1532.97 Q1323.14 1528.93 1320.46 1526.73 Q1317.82 1524.5 1313.02 1524.5 Q1309.96 1524.5 1307.06 1525.23 Q1304.17 1525.97 1301.49 1527.43 L1301.49 1522.02 Q1304.71 1520.78 1307.73 1520.17 Q1310.76 1519.54 1313.62 1519.54 Q1321.36 1519.54 1325.18 1523.55 Q1328.99 1527.56 1328.99 1535.71 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M1355.79 1525.87 Q1354.81 1525.3 1353.63 1525.04 Q1352.48 1524.76 1351.08 1524.76 Q1346.12 1524.76 1343.44 1528 Q1340.8 1531.22 1340.8 1537.27 L1340.8 1556.04 L1334.91 1556.04 L1334.91 1520.4 L1340.8 1520.4 L1340.8 1525.93 Q1342.65 1522.69 1345.61 1521.13 Q1348.57 1519.54 1352.8 1519.54 Q1353.41 1519.54 1354.14 1519.63 Q1354.87 1519.7 1355.76 1519.85 L1355.79 1525.87 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M42.0438 786.185 L48.314 786.185 Q46.5634 789.846 45.704 793.092 Q44.8447 796.339 44.8447 799.362 Q44.8447 804.614 46.8817 807.479 Q48.9187 810.311 52.6745 810.311 Q55.8255 810.311 57.4488 808.434 Q59.0402 806.524 60.0269 801.24 L60.8226 797.357 Q62.1912 790.164 65.6605 786.758 Q69.098 783.321 74.8908 783.321 Q81.7976 783.321 85.3624 787.968 Q88.9272 792.583 88.9272 801.527 Q88.9272 804.901 88.1633 808.72 Q87.3994 812.508 85.9035 816.582 L79.2831 816.582 Q81.4793 812.667 82.5933 808.911 Q83.7073 805.155 83.7073 801.527 Q83.7073 796.02 81.543 793.028 Q79.3786 790.037 75.3682 790.037 Q71.8671 790.037 69.8937 792.201 Q67.9204 794.333 66.9337 799.235 L66.1698 803.15 Q64.7375 810.343 61.682 813.558 Q58.6264 816.773 53.1837 816.773 Q46.8817 816.773 43.2532 812.348 Q39.6248 807.892 39.6248 800.094 Q39.6248 796.752 40.2295 793.283 Q40.8343 789.814 42.0438 786.185 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M42.2347 771.385 L52.3562 771.385 L52.3562 759.322 L56.9077 759.322 L56.9077 771.385 L76.2594 771.385 Q80.6199 771.385 81.8613 770.207 Q83.1026 768.998 83.1026 765.338 L83.1026 759.322 L88.0042 759.322 L88.0042 765.338 Q88.0042 772.117 85.4897 774.695 Q82.9434 777.273 76.2594 777.273 L56.9077 777.273 L56.9077 781.57 L52.3562 781.57 L52.3562 777.273 L42.2347 777.273 L42.2347 771.385 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M56.4621 739.366 Q56.4621 744.076 60.1542 746.813 Q63.8145 749.551 70.212 749.551 Q76.6095 749.551 80.3017 746.845 Q83.9619 744.108 83.9619 739.366 Q83.9619 734.687 80.2698 731.95 Q76.5777 729.212 70.212 729.212 Q63.8781 729.212 60.186 731.95 Q56.4621 734.687 56.4621 739.366 M51.4968 739.366 Q51.4968 731.727 56.4621 727.366 Q61.4273 723.006 70.212 723.006 Q78.9649 723.006 83.9619 727.366 Q88.9272 731.727 88.9272 739.366 Q88.9272 747.036 83.9619 751.397 Q78.9649 755.725 70.212 755.725 Q61.4273 755.725 56.4621 751.397 Q51.4968 747.036 51.4968 739.366 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M53.7248 691.209 L59.1993 691.209 Q57.8307 693.692 57.1623 696.206 Q56.4621 698.689 56.4621 701.235 Q56.4621 706.932 60.0905 710.083 Q63.6872 713.234 70.212 713.234 Q76.7369 713.234 80.3653 710.083 Q83.9619 706.932 83.9619 701.235 Q83.9619 698.689 83.2935 696.206 Q82.5933 693.692 81.2247 691.209 L86.6355 691.209 Q87.7814 693.66 88.3543 696.302 Q88.9272 698.912 88.9272 701.872 Q88.9272 709.924 83.8664 714.667 Q78.8057 719.409 70.212 719.409 Q61.491 719.409 56.4939 714.635 Q51.4968 709.829 51.4968 701.49 Q51.4968 698.784 52.0697 696.206 Q52.6108 693.628 53.7248 691.209 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip550)" d="M 0 0 M38.479 685.289 L38.479 679.401 L67.7294 679.401 L52.3562 661.927 L52.3562 654.447 L69.0344 673.353 L88.0042 653.651 L88.0042 661.29 L70.5939 679.401 L88.0042 679.401 L88.0042 685.289 L38.479 685.289 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip552)" style="stroke:#009af9; stroke-width:4; stroke-opacity:1; fill:none" points="
  290.038,1384.24 390.17,289.054 490.302,340.193 590.434,187.293 690.566,323.295 790.698,272.081 890.83,86.1857 990.962,151.955 1091.09,460.196 1191.23,357.116 
  1291.36,306.029 1391.49,306.089 1491.62,221.181 1591.75,340.292 1691.89,153.513 1792.02,221.413 1892.15,204.383 1992.28,221.348 2092.41,238.271 2192.54,255.211 
  2292.68,528.829 
  "/>
</svg>
<p>The small complexity addition yields us a generous speed up of around 6x.</p><pre><code class="language-julia">@btime Agents.step!(model, agent_diffeq_step!, model_diffeq_step!, 20) setup =
    (model = initialise_diffeq())</code></pre><pre><code class="language-none">  3.685 ms (136040 allocations: 3.88 MiB)</code></pre><p>Digging into the results a little more, we can see that the <code>DifferentialEquations</code> solver did not need to solve the logistic equation at every agent step to achieve a stable solution for us:</p><pre><code class="language-julia">length(modeldeq.i.sol.t)</code></pre><pre><code class="language-none">2282</code></pre><pre><code class="language-julia">365 * 20 &gt; length(modeldeq.i.sol.t)</code></pre><pre><code class="language-none">true</code></pre><p>With other initial conditions, there&#39;s the possibility that this may not be the case. When this occurs, these additional samples provide mathematical guarantees that the results are accurate (to a given tolerance), which is a safeguard not possible for our Euler example.</p><p>Compare our two results directly, both start with the same random seed and evolve in precisely the same manner:</p><pre><code class="language-julia">plot(results.stock, label = &quot;Euler&quot;, ylabel = &quot;Stock&quot;, xlabel = &quot;Year&quot;)
plot!(resultsdeq.stock, label = &quot;TSit5&quot;)</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip610">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip610)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip611">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip610)" d="
M229.959 1423.18 L2352.76 1423.18 L2352.76 47.2441 L229.959 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip612">
    <rect x="229" y="47" width="2124" height="1377"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip612)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  690.566,1423.18 690.566,47.2441 
  "/>
<polyline clip-path="url(#clip612)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1191.23,1423.18 1191.23,47.2441 
  "/>
<polyline clip-path="url(#clip612)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1691.89,1423.18 1691.89,47.2441 
  "/>
<polyline clip-path="url(#clip612)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  2192.54,1423.18 2192.54,47.2441 
  "/>
<polyline clip-path="url(#clip612)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.959,1312.34 2352.76,1312.34 
  "/>
<polyline clip-path="url(#clip612)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.959,1072.7 2352.76,1072.7 
  "/>
<polyline clip-path="url(#clip612)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.959,833.055 2352.76,833.055 
  "/>
<polyline clip-path="url(#clip612)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.959,593.41 2352.76,593.41 
  "/>
<polyline clip-path="url(#clip612)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.959,353.764 2352.76,353.764 
  "/>
<polyline clip-path="url(#clip612)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.959,114.119 2352.76,114.119 
  "/>
<polyline clip-path="url(#clip610)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,1423.18 2352.76,1423.18 
  "/>
<polyline clip-path="url(#clip610)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,1423.18 229.959,47.2441 
  "/>
<polyline clip-path="url(#clip610)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  690.566,1423.18 690.566,1406.67 
  "/>
<polyline clip-path="url(#clip610)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1191.23,1423.18 1191.23,1406.67 
  "/>
<polyline clip-path="url(#clip610)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1691.89,1423.18 1691.89,1406.67 
  "/>
<polyline clip-path="url(#clip610)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  2192.54,1423.18 2192.54,1406.67 
  "/>
<polyline clip-path="url(#clip610)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,1312.34 255.432,1312.34 
  "/>
<polyline clip-path="url(#clip610)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,1072.7 255.432,1072.7 
  "/>
<polyline clip-path="url(#clip610)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,833.055 255.432,833.055 
  "/>
<polyline clip-path="url(#clip610)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,593.41 255.432,593.41 
  "/>
<polyline clip-path="url(#clip610)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,353.764 255.432,353.764 
  "/>
<polyline clip-path="url(#clip610)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.959,114.119 255.432,114.119 
  "/>
<path clip-path="url(#clip610)" d="M 0 0 M680.844 1442.09 L699.2 1442.09 L699.2 1446.03 L685.126 1446.03 L685.126 1454.5 Q686.144 1454.15 687.163 1453.99 Q688.181 1453.8 689.2 1453.8 Q694.987 1453.8 698.367 1456.98 Q701.746 1460.15 701.746 1465.56 Q701.746 1471.14 698.274 1474.24 Q694.802 1477.32 688.482 1477.32 Q686.306 1477.32 684.038 1476.95 Q681.793 1476.58 679.385 1475.84 L679.385 1471.14 Q681.469 1472.28 683.691 1472.83 Q685.913 1473.39 688.39 1473.39 Q692.394 1473.39 694.732 1471.28 Q697.07 1469.18 697.07 1465.56 Q697.07 1461.95 694.732 1459.85 Q692.394 1457.74 688.39 1457.74 Q686.515 1457.74 684.64 1458.16 Q682.788 1458.57 680.844 1459.45 L680.844 1442.09 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M1168.1 1472.72 L1175.74 1472.72 L1175.74 1446.35 L1167.43 1448.02 L1167.43 1443.76 L1175.69 1442.09 L1180.37 1442.09 L1180.37 1472.72 L1188.01 1472.72 L1188.01 1476.65 L1168.1 1476.65 L1168.1 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M1203.08 1445.17 Q1199.47 1445.17 1197.64 1448.74 Q1195.83 1452.28 1195.83 1459.41 Q1195.83 1466.51 1197.64 1470.08 Q1199.47 1473.62 1203.08 1473.62 Q1206.71 1473.62 1208.52 1470.08 Q1210.35 1466.51 1210.35 1459.41 Q1210.35 1452.28 1208.52 1448.74 Q1206.71 1445.17 1203.08 1445.17 M1203.08 1441.47 Q1208.89 1441.47 1211.94 1446.07 Q1215.02 1450.66 1215.02 1459.41 Q1215.02 1468.13 1211.94 1472.74 Q1208.89 1477.32 1203.08 1477.32 Q1197.27 1477.32 1194.19 1472.74 Q1191.13 1468.13 1191.13 1459.41 Q1191.13 1450.66 1194.19 1446.07 Q1197.27 1441.47 1203.08 1441.47 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M1669.26 1472.72 L1676.9 1472.72 L1676.9 1446.35 L1668.59 1448.02 L1668.59 1443.76 L1676.85 1442.09 L1681.53 1442.09 L1681.53 1472.72 L1689.17 1472.72 L1689.17 1476.65 L1669.26 1476.65 L1669.26 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M1694.28 1442.09 L1712.64 1442.09 L1712.64 1446.03 L1698.56 1446.03 L1698.56 1454.5 Q1699.58 1454.15 1700.6 1453.99 Q1701.62 1453.8 1702.64 1453.8 Q1708.42 1453.8 1711.8 1456.98 Q1715.18 1460.15 1715.18 1465.56 Q1715.18 1471.14 1711.71 1474.24 Q1708.24 1477.32 1701.92 1477.32 Q1699.74 1477.32 1697.48 1476.95 Q1695.23 1476.58 1692.82 1475.84 L1692.82 1471.14 Q1694.91 1472.28 1697.13 1472.83 Q1699.35 1473.39 1701.83 1473.39 Q1705.83 1473.39 1708.17 1471.28 Q1710.51 1469.18 1710.51 1465.56 Q1710.51 1461.95 1708.17 1459.85 Q1705.83 1457.74 1701.83 1457.74 Q1699.95 1457.74 1698.08 1458.16 Q1696.23 1458.57 1694.28 1459.45 L1694.28 1442.09 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M2173.69 1472.72 L2190.01 1472.72 L2190.01 1476.65 L2168.07 1476.65 L2168.07 1472.72 Q2170.73 1469.96 2175.31 1465.33 Q2179.92 1460.68 2181.1 1459.34 Q2183.34 1456.81 2184.22 1455.08 Q2185.13 1453.32 2185.13 1451.63 Q2185.13 1448.87 2183.18 1447.14 Q2181.26 1445.4 2178.16 1445.4 Q2175.96 1445.4 2173.51 1446.17 Q2171.08 1446.93 2168.3 1448.48 L2168.3 1443.76 Q2171.12 1442.62 2173.57 1442.05 Q2176.03 1441.47 2178.07 1441.47 Q2183.44 1441.47 2186.63 1444.15 Q2189.82 1446.84 2189.82 1451.33 Q2189.82 1453.46 2189.01 1455.38 Q2188.23 1457.28 2186.12 1459.87 Q2185.54 1460.54 2182.44 1463.76 Q2179.34 1466.95 2173.69 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M2205.08 1445.17 Q2201.47 1445.17 2199.64 1448.74 Q2197.83 1452.28 2197.83 1459.41 Q2197.83 1466.51 2199.64 1470.08 Q2201.47 1473.62 2205.08 1473.62 Q2208.71 1473.62 2210.52 1470.08 Q2212.35 1466.51 2212.35 1459.41 Q2212.35 1452.28 2210.52 1448.74 Q2208.71 1445.17 2205.08 1445.17 M2205.08 1441.47 Q2210.89 1441.47 2213.95 1446.07 Q2217.02 1450.66 2217.02 1459.41 Q2217.02 1468.13 2213.95 1472.74 Q2210.89 1477.32 2205.08 1477.32 Q2199.27 1477.32 2196.19 1472.74 Q2193.14 1468.13 2193.14 1459.41 Q2193.14 1450.66 2196.19 1446.07 Q2199.27 1441.47 2205.08 1441.47 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M142.348 1299.14 L130.543 1317.59 L142.348 1317.59 L142.348 1299.14 M141.121 1295.06 L147.001 1295.06 L147.001 1317.59 L151.931 1317.59 L151.931 1321.48 L147.001 1321.48 L147.001 1329.62 L142.348 1329.62 L142.348 1321.48 L126.746 1321.48 L126.746 1316.96 L141.121 1295.06 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M167.001 1298.14 Q163.39 1298.14 161.561 1301.71 Q159.755 1305.25 159.755 1312.38 Q159.755 1319.49 161.561 1323.05 Q163.39 1326.59 167.001 1326.59 Q170.635 1326.59 172.44 1323.05 Q174.269 1319.49 174.269 1312.38 Q174.269 1305.25 172.44 1301.71 Q170.635 1298.14 167.001 1298.14 M167.001 1294.44 Q172.811 1294.44 175.866 1299.05 Q178.945 1303.63 178.945 1312.38 Q178.945 1321.11 175.866 1325.71 Q172.811 1330.3 167.001 1330.3 Q161.191 1330.3 158.112 1325.71 Q155.056 1321.11 155.056 1312.38 Q155.056 1303.63 158.112 1299.05 Q161.191 1294.44 167.001 1294.44 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M194.014 1298.14 Q190.403 1298.14 188.575 1301.71 Q186.769 1305.25 186.769 1312.38 Q186.769 1319.49 188.575 1323.05 Q190.403 1326.59 194.014 1326.59 Q197.649 1326.59 199.454 1323.05 Q201.283 1319.49 201.283 1312.38 Q201.283 1305.25 199.454 1301.71 Q197.649 1298.14 194.014 1298.14 M194.014 1294.44 Q199.825 1294.44 202.88 1299.05 Q205.959 1303.63 205.959 1312.38 Q205.959 1321.11 202.88 1325.71 Q199.825 1330.3 194.014 1330.3 Q188.204 1330.3 185.126 1325.71 Q182.07 1321.11 182.07 1312.38 Q182.07 1303.63 185.126 1299.05 Q188.204 1294.44 194.014 1294.44 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M143.575 1059.49 L131.769 1077.94 L143.575 1077.94 L143.575 1059.49 M142.348 1055.42 L148.228 1055.42 L148.228 1077.94 L153.158 1077.94 L153.158 1081.83 L148.228 1081.83 L148.228 1089.98 L143.575 1089.98 L143.575 1081.83 L127.973 1081.83 L127.973 1077.32 L142.348 1055.42 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M159.038 1086.04 L166.677 1086.04 L166.677 1059.68 L158.366 1061.35 L158.366 1057.09 L166.63 1055.42 L171.306 1055.42 L171.306 1086.04 L178.945 1086.04 L178.945 1089.98 L159.038 1089.98 L159.038 1086.04 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M194.014 1058.5 Q190.403 1058.5 188.575 1062.06 Q186.769 1065.6 186.769 1072.73 Q186.769 1079.84 188.575 1083.41 Q190.403 1086.95 194.014 1086.95 Q197.649 1086.95 199.454 1083.41 Q201.283 1079.84 201.283 1072.73 Q201.283 1065.6 199.454 1062.06 Q197.649 1058.5 194.014 1058.5 M194.014 1054.79 Q199.825 1054.79 202.88 1059.4 Q205.959 1063.98 205.959 1072.73 Q205.959 1081.46 202.88 1086.07 Q199.825 1090.65 194.014 1090.65 Q188.204 1090.65 185.126 1086.07 Q182.07 1081.46 182.07 1072.73 Q182.07 1063.98 185.126 1059.4 Q188.204 1054.79 194.014 1054.79 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M143.945 819.849 L132.14 838.298 L143.945 838.298 L143.945 819.849 M142.718 815.775 L148.598 815.775 L148.598 838.298 L153.529 838.298 L153.529 842.187 L148.598 842.187 L148.598 850.335 L143.945 850.335 L143.945 842.187 L128.343 842.187 L128.343 837.673 L142.718 815.775 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M162.626 846.399 L178.945 846.399 L178.945 850.335 L157.001 850.335 L157.001 846.399 Q159.663 843.645 164.246 839.015 Q168.853 834.362 170.033 833.02 Q172.278 830.497 173.158 828.761 Q174.061 827.001 174.061 825.312 Q174.061 822.557 172.116 820.821 Q170.195 819.085 167.093 819.085 Q164.894 819.085 162.441 819.849 Q160.01 820.613 157.232 822.163 L157.232 817.441 Q160.056 816.307 162.51 815.728 Q164.964 815.15 167.001 815.15 Q172.371 815.15 175.565 817.835 Q178.76 820.52 178.76 825.011 Q178.76 827.14 177.95 829.062 Q177.163 830.96 175.056 833.552 Q174.477 834.224 171.376 837.441 Q168.274 840.636 162.626 846.399 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M194.014 818.853 Q190.403 818.853 188.575 822.418 Q186.769 825.96 186.769 833.089 Q186.769 840.196 188.575 843.761 Q190.403 847.302 194.014 847.302 Q197.649 847.302 199.454 843.761 Q201.283 840.196 201.283 833.089 Q201.283 825.96 199.454 822.418 Q197.649 818.853 194.014 818.853 M194.014 815.15 Q199.825 815.15 202.88 819.756 Q205.959 824.339 205.959 833.089 Q205.959 841.816 202.88 846.423 Q199.825 851.006 194.014 851.006 Q188.204 851.006 185.126 846.423 Q182.07 841.816 182.07 833.089 Q182.07 824.339 185.126 819.756 Q188.204 815.15 194.014 815.15 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M142.996 580.204 L131.191 598.653 L142.996 598.653 L142.996 580.204 M141.769 576.13 L147.649 576.13 L147.649 598.653 L152.579 598.653 L152.579 602.541 L147.649 602.541 L147.649 610.69 L142.996 610.69 L142.996 602.541 L127.394 602.541 L127.394 598.028 L141.769 576.13 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M171.815 592.055 Q175.172 592.773 177.047 595.041 Q178.945 597.31 178.945 600.643 Q178.945 605.759 175.427 608.56 Q171.908 611.361 165.427 611.361 Q163.251 611.361 160.936 610.921 Q158.644 610.504 156.191 609.648 L156.191 605.134 Q158.135 606.268 160.45 606.847 Q162.765 607.426 165.288 607.426 Q169.686 607.426 171.978 605.69 Q174.292 603.953 174.292 600.643 Q174.292 597.588 172.14 595.875 Q170.01 594.139 166.19 594.139 L162.163 594.139 L162.163 590.296 L166.376 590.296 Q169.825 590.296 171.653 588.93 Q173.482 587.542 173.482 584.949 Q173.482 582.287 171.584 580.875 Q169.709 579.44 166.19 579.44 Q164.269 579.44 162.07 579.856 Q159.871 580.273 157.232 581.153 L157.232 576.986 Q159.894 576.245 162.209 575.875 Q164.547 575.505 166.607 575.505 Q171.931 575.505 175.033 577.935 Q178.135 580.343 178.135 584.463 Q178.135 587.333 176.491 589.324 Q174.848 591.292 171.815 592.055 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M194.014 579.208 Q190.403 579.208 188.575 582.773 Q186.769 586.315 186.769 593.444 Q186.769 600.551 188.575 604.116 Q190.403 607.657 194.014 607.657 Q197.649 607.657 199.454 604.116 Q201.283 600.551 201.283 593.444 Q201.283 586.315 199.454 582.773 Q197.649 579.208 194.014 579.208 M194.014 575.505 Q199.825 575.505 202.88 580.111 Q205.959 584.694 205.959 593.444 Q205.959 602.171 202.88 606.778 Q199.825 611.361 194.014 611.361 Q188.204 611.361 185.126 606.778 Q182.07 602.171 182.07 593.444 Q182.07 584.694 185.126 580.111 Q188.204 575.505 194.014 575.505 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M141.862 340.559 L130.056 359.008 L141.862 359.008 L141.862 340.559 M140.635 336.484 L146.515 336.484 L146.515 359.008 L151.445 359.008 L151.445 362.896 L146.515 362.896 L146.515 371.044 L141.862 371.044 L141.862 362.896 L126.26 362.896 L126.26 358.383 L140.635 336.484 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M169.362 340.559 L157.556 359.008 L169.362 359.008 L169.362 340.559 M168.135 336.484 L174.015 336.484 L174.015 359.008 L178.945 359.008 L178.945 362.896 L174.015 362.896 L174.015 371.044 L169.362 371.044 L169.362 362.896 L153.76 362.896 L153.76 358.383 L168.135 336.484 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M194.014 339.563 Q190.403 339.563 188.575 343.128 Q186.769 346.67 186.769 353.799 Q186.769 360.906 188.575 364.47 Q190.403 368.012 194.014 368.012 Q197.649 368.012 199.454 364.47 Q201.283 360.906 201.283 353.799 Q201.283 346.67 199.454 343.128 Q197.649 339.563 194.014 339.563 M194.014 335.86 Q199.825 335.86 202.88 340.466 Q205.959 345.049 205.959 353.799 Q205.959 362.526 202.88 367.132 Q199.825 371.716 194.014 371.716 Q188.204 371.716 185.126 367.132 Q182.07 362.526 182.07 353.799 Q182.07 345.049 185.126 340.466 Q188.204 335.86 194.014 335.86 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M143.343 100.913 L131.538 119.362 L143.343 119.362 L143.343 100.913 M142.117 96.8394 L147.996 96.8394 L147.996 119.362 L152.927 119.362 L152.927 123.251 L147.996 123.251 L147.996 131.399 L143.343 131.399 L143.343 123.251 L127.742 123.251 L127.742 118.737 L142.117 96.8394 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M158.042 96.8394 L176.399 96.8394 L176.399 100.775 L162.325 100.775 L162.325 109.247 Q163.343 108.9 164.362 108.738 Q165.38 108.552 166.399 108.552 Q172.186 108.552 175.565 111.724 Q178.945 114.895 178.945 120.312 Q178.945 125.89 175.473 128.992 Q172.001 132.071 165.681 132.071 Q163.505 132.071 161.237 131.7 Q158.991 131.33 156.584 130.589 L156.584 125.89 Q158.667 127.024 160.89 127.58 Q163.112 128.136 165.589 128.136 Q169.593 128.136 171.931 126.029 Q174.269 123.923 174.269 120.312 Q174.269 116.7 171.931 114.594 Q169.593 112.488 165.589 112.488 Q163.714 112.488 161.839 112.904 Q159.987 113.321 158.042 114.2 L158.042 96.8394 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M194.014 99.9181 Q190.403 99.9181 188.575 103.483 Q186.769 107.025 186.769 114.154 Q186.769 121.261 188.575 124.825 Q190.403 128.367 194.014 128.367 Q197.649 128.367 199.454 124.825 Q201.283 121.261 201.283 114.154 Q201.283 107.025 199.454 103.483 Q197.649 99.9181 194.014 99.9181 M194.014 96.2144 Q199.825 96.2144 202.88 100.821 Q205.959 105.404 205.959 114.154 Q205.959 122.881 202.88 127.487 Q199.825 132.071 194.014 132.071 Q188.204 132.071 185.126 127.487 Q182.07 122.881 182.07 114.154 Q182.07 105.404 185.126 100.821 Q188.204 96.2144 194.014 96.2144 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M1226.92 1508.52 L1233.83 1508.52 L1247 1528.07 L1260.09 1508.52 L1266.99 1508.52 L1250.19 1533.41 L1250.19 1556.04 L1243.73 1556.04 L1243.73 1533.41 L1226.92 1508.52 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M1294.97 1536.76 L1294.97 1539.62 L1268.04 1539.62 Q1268.42 1545.67 1271.67 1548.85 Q1274.95 1552 1280.77 1552 Q1284.15 1552 1287.3 1551.17 Q1290.48 1550.35 1293.6 1548.69 L1293.6 1554.23 Q1290.45 1555.57 1287.14 1556.27 Q1283.83 1556.97 1280.42 1556.97 Q1271.89 1556.97 1266.9 1552 Q1261.93 1547.04 1261.93 1538.57 Q1261.93 1529.82 1266.64 1524.69 Q1271.38 1519.54 1279.41 1519.54 Q1286.6 1519.54 1290.77 1524.18 Q1294.97 1528.8 1294.97 1536.76 M1289.11 1535.04 Q1289.05 1530.23 1286.41 1527.37 Q1283.8 1524.5 1279.47 1524.5 Q1274.57 1524.5 1271.61 1527.27 Q1268.68 1530.04 1268.23 1535.07 L1289.11 1535.04 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M1317.31 1538.12 Q1310.22 1538.12 1307.48 1539.75 Q1304.74 1541.37 1304.74 1545.29 Q1304.74 1548.4 1306.78 1550.25 Q1308.85 1552.07 1312.38 1552.07 Q1317.25 1552.07 1320.18 1548.63 Q1323.14 1545.16 1323.14 1539.43 L1323.14 1538.12 L1317.31 1538.12 M1328.99 1535.71 L1328.99 1556.04 L1323.14 1556.04 L1323.14 1550.63 Q1321.13 1553.88 1318.14 1555.44 Q1315.15 1556.97 1310.82 1556.97 Q1305.35 1556.97 1302.1 1553.91 Q1298.88 1550.82 1298.88 1545.67 Q1298.88 1539.65 1302.9 1536.6 Q1306.94 1533.54 1314.93 1533.54 L1323.14 1533.54 L1323.14 1532.97 Q1323.14 1528.93 1320.46 1526.73 Q1317.82 1524.5 1313.02 1524.5 Q1309.96 1524.5 1307.06 1525.23 Q1304.17 1525.97 1301.49 1527.43 L1301.49 1522.02 Q1304.71 1520.78 1307.73 1520.17 Q1310.76 1519.54 1313.62 1519.54 Q1321.36 1519.54 1325.18 1523.55 Q1328.99 1527.56 1328.99 1535.71 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M1355.79 1525.87 Q1354.81 1525.3 1353.63 1525.04 Q1352.48 1524.76 1351.08 1524.76 Q1346.12 1524.76 1343.44 1528 Q1340.8 1531.22 1340.8 1537.27 L1340.8 1556.04 L1334.91 1556.04 L1334.91 1520.4 L1340.8 1520.4 L1340.8 1525.93 Q1342.65 1522.69 1345.61 1521.13 Q1348.57 1519.54 1352.8 1519.54 Q1353.41 1519.54 1354.14 1519.63 Q1354.87 1519.7 1355.76 1519.85 L1355.79 1525.87 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M42.0438 786.185 L48.314 786.185 Q46.5634 789.846 45.704 793.092 Q44.8447 796.339 44.8447 799.362 Q44.8447 804.614 46.8817 807.479 Q48.9187 810.311 52.6745 810.311 Q55.8255 810.311 57.4488 808.434 Q59.0402 806.524 60.0269 801.24 L60.8226 797.357 Q62.1912 790.164 65.6605 786.758 Q69.098 783.321 74.8908 783.321 Q81.7976 783.321 85.3624 787.968 Q88.9272 792.583 88.9272 801.527 Q88.9272 804.901 88.1633 808.72 Q87.3994 812.508 85.9035 816.582 L79.2831 816.582 Q81.4793 812.667 82.5933 808.911 Q83.7073 805.155 83.7073 801.527 Q83.7073 796.02 81.543 793.028 Q79.3786 790.037 75.3682 790.037 Q71.8671 790.037 69.8937 792.201 Q67.9204 794.333 66.9337 799.235 L66.1698 803.15 Q64.7375 810.343 61.682 813.558 Q58.6264 816.773 53.1837 816.773 Q46.8817 816.773 43.2532 812.348 Q39.6248 807.892 39.6248 800.094 Q39.6248 796.752 40.2295 793.283 Q40.8343 789.814 42.0438 786.185 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M42.2347 771.385 L52.3562 771.385 L52.3562 759.322 L56.9077 759.322 L56.9077 771.385 L76.2594 771.385 Q80.6199 771.385 81.8613 770.207 Q83.1026 768.998 83.1026 765.338 L83.1026 759.322 L88.0042 759.322 L88.0042 765.338 Q88.0042 772.117 85.4897 774.695 Q82.9434 777.273 76.2594 777.273 L56.9077 777.273 L56.9077 781.57 L52.3562 781.57 L52.3562 777.273 L42.2347 777.273 L42.2347 771.385 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M56.4621 739.366 Q56.4621 744.076 60.1542 746.813 Q63.8145 749.551 70.212 749.551 Q76.6095 749.551 80.3017 746.845 Q83.9619 744.108 83.9619 739.366 Q83.9619 734.687 80.2698 731.95 Q76.5777 729.212 70.212 729.212 Q63.8781 729.212 60.186 731.95 Q56.4621 734.687 56.4621 739.366 M51.4968 739.366 Q51.4968 731.727 56.4621 727.366 Q61.4273 723.006 70.212 723.006 Q78.9649 723.006 83.9619 727.366 Q88.9272 731.727 88.9272 739.366 Q88.9272 747.036 83.9619 751.397 Q78.9649 755.725 70.212 755.725 Q61.4273 755.725 56.4621 751.397 Q51.4968 747.036 51.4968 739.366 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M53.7248 691.209 L59.1993 691.209 Q57.8307 693.692 57.1623 696.206 Q56.4621 698.689 56.4621 701.235 Q56.4621 706.932 60.0905 710.083 Q63.6872 713.234 70.212 713.234 Q76.7369 713.234 80.3653 710.083 Q83.9619 706.932 83.9619 701.235 Q83.9619 698.689 83.2935 696.206 Q82.5933 693.692 81.2247 691.209 L86.6355 691.209 Q87.7814 693.66 88.3543 696.302 Q88.9272 698.912 88.9272 701.872 Q88.9272 709.924 83.8664 714.667 Q78.8057 719.409 70.212 719.409 Q61.491 719.409 56.4939 714.635 Q51.4968 709.829 51.4968 701.49 Q51.4968 698.784 52.0697 696.206 Q52.6108 693.628 53.7248 691.209 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M38.479 685.289 L38.479 679.401 L67.7294 679.401 L52.3562 661.927 L52.3562 654.447 L69.0344 673.353 L88.0042 653.651 L88.0042 661.29 L70.5939 679.401 L88.0042 679.401 L88.0042 685.289 L38.479 685.289 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip612)" style="stroke:#009af9; stroke-width:4; stroke-opacity:1; fill:none" points="
  290.038,1312.34 390.17,1048.74 490.302,1120.63 590.434,904.948 690.566,1096.66 790.698,1024.77 890.83,761.161 990.962,857.019 1091.09,1288.38 1191.23,1144.59 
  1291.36,1072.7 1391.49,1072.7 1491.62,952.877 1591.75,1120.63 1691.89,857.019 1792.02,952.877 1892.15,928.913 1992.28,952.877 2092.41,976.842 2192.54,1000.81 
  2292.68,1384.24 
  "/>
<polyline clip-path="url(#clip612)" style="stroke:#e26f46; stroke-width:4; stroke-opacity:1; fill:none" points="
  290.038,1312.34 390.17,277.818 490.302,326.124 590.434,181.693 690.566,310.162 790.698,261.785 890.83,86.1857 990.962,148.312 1091.09,439.481 1191.23,342.11 
  1291.36,293.853 1391.49,293.909 1491.62,213.704 1591.75,326.218 1691.89,149.784 1792.02,213.923 1892.15,197.837 1992.28,213.862 2092.41,229.847 2192.54,245.849 
  2292.68,504.313 
  "/>
<path clip-path="url(#clip610)" d="
M2003.87 214.069 L2352.76 214.069 L2352.76 32.6286 L2003.87 32.6286  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<polyline clip-path="url(#clip610)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  2003.87,214.069 2352.76,214.069 2352.76,32.6286 2003.87,32.6286 2003.87,214.069 
  "/>
<polyline clip-path="url(#clip610)" style="stroke:#009af9; stroke-width:4; stroke-opacity:1; fill:none" points="
  2027.87,93.1086 2171.87,93.1086 
  "/>
<path clip-path="url(#clip610)" d="M 0 0 M2195.87 75.8286 L2217.72 75.8286 L2217.72 79.7638 L2200.54 79.7638 L2200.54 89.9952 L2217 89.9952 L2217 93.9304 L2200.54 93.9304 L2200.54 106.453 L2218.14 106.453 L2218.14 110.389 L2195.87 110.389 L2195.87 75.8286 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M2222.16 100.157 L2222.16 84.4628 L2226.42 84.4628 L2226.42 99.9952 Q2226.42 103.676 2227.86 105.528 Q2229.29 107.356 2232.16 107.356 Q2235.61 107.356 2237.6 105.157 Q2239.62 102.958 2239.62 99.1618 L2239.62 84.4628 L2243.88 84.4628 L2243.88 110.389 L2239.62 110.389 L2239.62 106.407 Q2238.07 108.768 2236.01 109.926 Q2233.97 111.06 2231.26 111.06 Q2226.79 111.06 2224.48 108.282 Q2222.16 105.504 2222.16 100.157 M2232.88 83.8378 L2232.88 83.8378 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M2248.34 74.3703 L2252.6 74.3703 L2252.6 110.389 L2248.34 110.389 L2248.34 74.3703 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M2279.25 96.3609 L2279.25 98.4442 L2259.66 98.4442 Q2259.94 102.842 2262.3 105.157 Q2264.69 107.449 2268.92 107.449 Q2271.38 107.449 2273.67 106.847 Q2275.98 106.245 2278.25 105.041 L2278.25 109.069 Q2275.96 110.041 2273.55 110.551 Q2271.14 111.06 2268.67 111.06 Q2262.46 111.06 2258.83 107.449 Q2255.22 103.838 2255.22 97.6804 Q2255.22 91.3146 2258.65 87.5878 Q2262.09 83.8378 2267.93 83.8378 Q2273.16 83.8378 2276.19 87.2174 Q2279.25 90.5739 2279.25 96.3609 M2274.99 95.1109 Q2274.94 91.6156 2273.02 89.5322 Q2271.12 87.4489 2267.97 87.4489 Q2264.41 87.4489 2262.26 89.4628 Q2260.13 91.4767 2259.8 95.1341 L2274.99 95.1109 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M2298.74 88.4443 Q2298.02 88.0276 2297.16 87.8424 Q2296.33 87.6341 2295.31 87.6341 Q2291.7 87.6341 2289.76 89.9952 Q2287.83 92.3332 2287.83 96.7313 L2287.83 110.389 L2283.55 110.389 L2283.55 84.4628 L2287.83 84.4628 L2287.83 88.4906 Q2289.18 86.1295 2291.33 84.9952 Q2293.48 83.8378 2296.56 83.8378 Q2297 83.8378 2297.53 83.9073 Q2298.07 83.9536 2298.71 84.0693 L2298.74 88.4443 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip610)" style="stroke:#e26f46; stroke-width:4; stroke-opacity:1; fill:none" points="
  2027.87,153.589 2171.87,153.589 
  "/>
<path clip-path="url(#clip610)" d="M 0 0 M2195.87 136.309 L2225.1 136.309 L2225.1 140.244 L2212.84 140.244 L2212.84 170.869 L2208.14 170.869 L2208.14 140.244 L2195.87 140.244 L2195.87 136.309 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M2250.47 137.443 L2250.47 142.003 Q2247.81 140.73 2245.45 140.105 Q2243.09 139.48 2240.89 139.48 Q2237.07 139.48 2234.99 140.961 Q2232.93 142.443 2232.93 145.174 Q2232.93 147.466 2234.29 148.647 Q2235.68 149.804 2239.52 150.522 L2242.35 151.1 Q2247.58 152.096 2250.06 154.619 Q2252.56 157.119 2252.56 161.332 Q2252.56 166.355 2249.18 168.947 Q2245.82 171.54 2239.32 171.54 Q2236.86 171.54 2234.08 170.984 Q2231.33 170.429 2228.37 169.341 L2228.37 164.526 Q2231.21 166.123 2233.95 166.933 Q2236.68 167.744 2239.32 167.744 Q2243.32 167.744 2245.5 166.17 Q2247.67 164.596 2247.67 161.679 Q2247.67 159.133 2246.1 157.697 Q2244.55 156.262 2240.98 155.545 L2238.14 154.989 Q2232.9 153.947 2230.57 151.725 Q2228.23 149.503 2228.23 145.545 Q2228.23 140.961 2231.45 138.322 Q2234.69 135.684 2240.36 135.684 Q2242.79 135.684 2245.31 136.123 Q2247.83 136.563 2250.47 137.443 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M2257.02 144.943 L2261.28 144.943 L2261.28 170.869 L2257.02 170.869 L2257.02 144.943 M2257.02 134.85 L2261.28 134.85 L2261.28 140.244 L2257.02 140.244 L2257.02 134.85 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M2269.96 137.582 L2269.96 144.943 L2278.74 144.943 L2278.74 148.253 L2269.96 148.253 L2269.96 162.327 Q2269.96 165.498 2270.82 166.401 Q2271.7 167.304 2274.36 167.304 L2278.74 167.304 L2278.74 170.869 L2274.36 170.869 Q2269.43 170.869 2267.56 169.04 Q2265.68 167.188 2265.68 162.327 L2265.68 148.253 L2262.56 148.253 L2262.56 144.943 L2265.68 144.943 L2265.68 137.582 L2269.96 137.582 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip610)" d="M 0 0 M2283.85 136.309 L2302.21 136.309 L2302.21 140.244 L2288.14 140.244 L2288.14 148.716 Q2289.15 148.369 2290.17 148.207 Q2291.19 148.022 2292.21 148.022 Q2298 148.022 2301.38 151.193 Q2304.76 154.364 2304.76 159.781 Q2304.76 165.359 2301.28 168.461 Q2297.81 171.54 2291.49 171.54 Q2289.32 171.54 2287.05 171.17 Q2284.8 170.799 2282.39 170.058 L2282.39 165.359 Q2284.48 166.494 2286.7 167.049 Q2288.92 167.605 2291.4 167.605 Q2295.4 167.605 2297.74 165.498 Q2300.08 163.392 2300.08 159.781 Q2300.08 156.17 2297.74 154.063 Q2295.4 151.957 2291.4 151.957 Q2289.52 151.957 2287.65 152.373 Q2285.8 152.79 2283.85 153.67 L2283.85 136.309 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /></svg>
<p>That&#39;s an average discrepancy of 30 fish! Optimising the step size in the Euler method can close this gap, but this is yet more analysis overhead we&#39;d prefer to avoid by using better solutions.</p><p>In addition, the ODE solver will be faster most of the time, regardless of how many steps it needs to take. If not, there are other, more effective solvers that can be used for your particular case.</p><h2 id="Coupling-Agents.jl-to-DifferentialEquations.jl"><a class="docs-heading-anchor" href="#Coupling-Agents.jl-to-DifferentialEquations.jl">Coupling Agents.jl to DifferentialEquations.jl</a><a id="Coupling-Agents.jl-to-DifferentialEquations.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Coupling-Agents.jl-to-DifferentialEquations.jl" title="Permalink"></a></h2><p>Perhaps you&#39;re more familiar to the <code>DifferentialEquations</code> <code>solve</code> interface and you&#39;re new to <code>Agents</code>?</p><p>We can also couple the two systems the other way. Let&#39;s use <a href="https://docs.sciml.ai/stable/features/callback_functions/#Using-Callbacks-1">callbacks</a> to handle the agent based aspects of our problem.</p><pre><code class="language-julia">function agent_cb_step!(agent, model)
    agent.yearly_catch = rand(Poisson(agent.competence))
end

function initialise_cb(; min_threshold = 60.0, nagents = 50)
    model = ABM(Fisher; properties = Dict(:min_threshold =&gt; min_threshold))

    for _ in 1:nagents
        add_agent!(model, floor(rand(truncated(LogNormal(), 1, 6))), 0.0)
    end
    model
end

modelcb = initialise_cb()</code></pre><pre><code class="language-none">AgentBasedModel with 50 agents of type Fisher
 no space
 scheduler: fastest
 properties: Dict(:min_threshold =&gt; 60.0)</code></pre><p>That&#39;s it for the <code>Agents</code> side of things! Now to build the ODE.</p><pre><code class="language-julia">function fish!(integrator, model)
    integrator.p[2] = integrator.u[1] &gt; model.min_threshold ?
        sum(a.yearly_catch for a in allagents(model)) : 0.0
    Agents.step!(model, agent_cb_step!, 1)
end

function fish_stock!(ds, s, p, t)
    max_population, h = p
    ds[1] = s[1] * (1 - (s[1] / max_population)) - h
end

tspan = (0.0, 20.0 * 365.0)
const initial_stock = 400.0
const max_population = 500.0

prob = DifferentialEquations.ODEProblem(
    fish_stock!,
    [initial_stock],
    tspan,
    [max_population, 0.0],
)

# Each Dec 31st, we call fish! that adds our catch modifier to the stock, and steps the model
fish = DifferentialEquations.PeriodicCallback(i -&gt; fish!(i, modelcb), 364)
# Stocks are replenished again
reset = DifferentialEquations.PeriodicCallback(i -&gt; i.p[2] = 0.0, 365)

sol = DifferentialEquations.solve(
    prob,
    DifferentialEquations.Tsit5();
    callback = DifferentialEquations.CallbackSet(fish, reset),
)

plot(
    sol(0:365:(365 * 20)),
    xticks = (0:(365 * 2):(365 * 20), 0:2:20),
    legend = false,
    ylabel = &quot;Stock&quot;,
    xlabel = &quot;Year&quot;,
)</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip670">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip670)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip671">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip670)" d="
M229.473 1423.18 L2352.76 1423.18 L2352.76 47.2441 L229.473 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip672">
    <rect x="229" y="47" width="2124" height="1377"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  289.566,1423.18 289.566,47.2441 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  489.875,1423.18 489.875,47.2441 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  690.185,1423.18 690.185,47.2441 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  890.495,1423.18 890.495,47.2441 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1090.8,1423.18 1090.8,47.2441 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1291.11,1423.18 1291.11,47.2441 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1491.42,1423.18 1491.42,47.2441 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1691.73,1423.18 1691.73,47.2441 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1892.04,1423.18 1892.04,47.2441 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  2092.35,1423.18 2092.35,47.2441 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  2292.66,1423.18 2292.66,47.2441 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.473,1246.67 2352.76,1246.67 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.473,918.826 2352.76,918.826 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.473,590.979 2352.76,590.979 
  "/>
<polyline clip-path="url(#clip672)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  229.473,263.133 2352.76,263.133 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.473,1423.18 2352.76,1423.18 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.473,1423.18 229.473,47.2441 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  289.566,1423.18 289.566,1406.67 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  489.875,1423.18 489.875,1406.67 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  690.185,1423.18 690.185,1406.67 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  890.495,1423.18 890.495,1406.67 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1090.8,1423.18 1090.8,1406.67 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1291.11,1423.18 1291.11,1406.67 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1491.42,1423.18 1491.42,1406.67 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1691.73,1423.18 1691.73,1406.67 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1892.04,1423.18 1892.04,1406.67 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  2092.35,1423.18 2092.35,1406.67 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  2292.66,1423.18 2292.66,1406.67 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.473,1246.67 254.952,1246.67 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.473,918.826 254.952,918.826 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.473,590.979 254.952,590.979 
  "/>
<polyline clip-path="url(#clip670)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  229.473,263.133 254.952,263.133 
  "/>
<path clip-path="url(#clip670)" d="M 0 0 M289.566 1445.17 Q285.955 1445.17 284.126 1448.74 Q282.32 1452.28 282.32 1459.41 Q282.32 1466.51 284.126 1470.08 Q285.955 1473.62 289.566 1473.62 Q293.2 1473.62 295.005 1470.08 Q296.834 1466.51 296.834 1459.41 Q296.834 1452.28 295.005 1448.74 Q293.2 1445.17 289.566 1445.17 M289.566 1441.47 Q295.376 1441.47 298.431 1446.07 Q301.51 1450.66 301.51 1459.41 Q301.51 1468.13 298.431 1472.74 Q295.376 1477.32 289.566 1477.32 Q283.755 1477.32 280.677 1472.74 Q277.621 1468.13 277.621 1459.41 Q277.621 1450.66 280.677 1446.07 Q283.755 1441.47 289.566 1441.47 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M484.528 1472.72 L500.848 1472.72 L500.848 1476.65 L478.903 1476.65 L478.903 1472.72 Q481.565 1469.96 486.149 1465.33 Q490.755 1460.68 491.936 1459.34 Q494.181 1456.81 495.061 1455.08 Q495.963 1453.32 495.963 1451.63 Q495.963 1448.87 494.019 1447.14 Q492.098 1445.4 488.996 1445.4 Q486.797 1445.4 484.343 1446.17 Q481.912 1446.93 479.135 1448.48 L479.135 1443.76 Q481.959 1442.62 484.412 1442.05 Q486.866 1441.47 488.903 1441.47 Q494.273 1441.47 497.468 1444.15 Q500.662 1446.84 500.662 1451.33 Q500.662 1453.46 499.852 1455.38 Q499.065 1457.28 496.959 1459.87 Q496.38 1460.54 493.278 1463.76 Q490.176 1466.95 484.528 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M693.194 1446.17 L681.389 1464.61 L693.194 1464.61 L693.194 1446.17 M691.967 1442.09 L697.847 1442.09 L697.847 1464.61 L702.778 1464.61 L702.778 1468.5 L697.847 1468.5 L697.847 1476.65 L693.194 1476.65 L693.194 1468.5 L677.593 1468.5 L677.593 1463.99 L691.967 1442.09 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M890.9 1457.51 Q887.752 1457.51 885.9 1459.66 Q884.071 1461.81 884.071 1465.56 Q884.071 1469.29 885.9 1471.47 Q887.752 1473.62 890.9 1473.62 Q894.048 1473.62 895.877 1471.47 Q897.729 1469.29 897.729 1465.56 Q897.729 1461.81 895.877 1459.66 Q894.048 1457.51 890.9 1457.51 M900.182 1442.86 L900.182 1447.11 Q898.423 1446.28 896.617 1445.84 Q894.835 1445.4 893.076 1445.4 Q888.446 1445.4 885.993 1448.53 Q883.562 1451.65 883.215 1457.97 Q884.581 1455.96 886.641 1454.89 Q888.701 1453.8 891.178 1453.8 Q896.386 1453.8 899.395 1456.98 Q902.428 1460.12 902.428 1465.56 Q902.428 1470.89 899.28 1474.11 Q896.131 1477.32 890.9 1477.32 Q884.905 1477.32 881.733 1472.74 Q878.562 1468.13 878.562 1459.41 Q878.562 1451.21 882.451 1446.35 Q886.34 1441.47 892.891 1441.47 Q894.65 1441.47 896.432 1441.81 Q898.238 1442.16 900.182 1442.86 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M1090.8 1460.24 Q1087.47 1460.24 1085.55 1462.02 Q1083.65 1463.8 1083.65 1466.93 Q1083.65 1470.05 1085.55 1471.84 Q1087.47 1473.62 1090.8 1473.62 Q1094.14 1473.62 1096.06 1471.84 Q1097.98 1470.03 1097.98 1466.93 Q1097.98 1463.8 1096.06 1462.02 Q1094.16 1460.24 1090.8 1460.24 M1086.13 1458.25 Q1083.12 1457.51 1081.43 1455.45 Q1079.76 1453.39 1079.76 1450.43 Q1079.76 1446.28 1082.7 1443.87 Q1085.67 1441.47 1090.8 1441.47 Q1095.97 1441.47 1098.91 1443.87 Q1101.85 1446.28 1101.85 1450.43 Q1101.85 1453.39 1100.16 1455.45 Q1098.49 1457.51 1095.5 1458.25 Q1098.88 1459.04 1100.76 1461.33 Q1102.66 1463.62 1102.66 1466.93 Q1102.66 1471.95 1099.58 1474.64 Q1096.52 1477.32 1090.8 1477.32 Q1085.09 1477.32 1082.01 1474.64 Q1078.95 1471.95 1078.95 1466.93 Q1078.95 1463.62 1080.85 1461.33 Q1082.75 1459.04 1086.13 1458.25 M1084.42 1450.86 Q1084.42 1453.55 1086.08 1455.05 Q1087.77 1456.56 1090.8 1456.56 Q1093.81 1456.56 1095.5 1455.05 Q1097.22 1453.55 1097.22 1450.86 Q1097.22 1448.18 1095.5 1446.68 Q1093.81 1445.17 1090.8 1445.17 Q1087.77 1445.17 1086.08 1446.68 Q1084.42 1448.18 1084.42 1450.86 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M1267.99 1472.72 L1275.63 1472.72 L1275.63 1446.35 L1267.32 1448.02 L1267.32 1443.76 L1275.58 1442.09 L1280.26 1442.09 L1280.26 1472.72 L1287.9 1472.72 L1287.9 1476.65 L1267.99 1476.65 L1267.99 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M1302.97 1445.17 Q1299.35 1445.17 1297.53 1448.74 Q1295.72 1452.28 1295.72 1459.41 Q1295.72 1466.51 1297.53 1470.08 Q1299.35 1473.62 1302.97 1473.62 Q1306.6 1473.62 1308.41 1470.08 Q1310.23 1466.51 1310.23 1459.41 Q1310.23 1452.28 1308.41 1448.74 Q1306.6 1445.17 1302.97 1445.17 M1302.97 1441.47 Q1308.78 1441.47 1311.83 1446.07 Q1314.91 1450.66 1314.91 1459.41 Q1314.91 1468.13 1311.83 1472.74 Q1308.78 1477.32 1302.97 1477.32 Q1297.16 1477.32 1294.08 1472.74 Q1291.02 1468.13 1291.02 1459.41 Q1291.02 1450.66 1294.08 1446.07 Q1297.16 1441.47 1302.97 1441.47 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M1469.1 1472.72 L1476.74 1472.72 L1476.74 1446.35 L1468.43 1448.02 L1468.43 1443.76 L1476.69 1442.09 L1481.37 1442.09 L1481.37 1472.72 L1489.01 1472.72 L1489.01 1476.65 L1469.1 1476.65 L1469.1 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M1498.1 1472.72 L1514.42 1472.72 L1514.42 1476.65 L1492.48 1476.65 L1492.48 1472.72 Q1495.14 1469.96 1499.72 1465.33 Q1504.33 1460.68 1505.51 1459.34 Q1507.75 1456.81 1508.63 1455.08 Q1509.54 1453.32 1509.54 1451.63 Q1509.54 1448.87 1507.59 1447.14 Q1505.67 1445.4 1502.57 1445.4 Q1500.37 1445.4 1497.92 1446.17 Q1495.49 1446.93 1492.71 1448.48 L1492.71 1443.76 Q1495.53 1442.62 1497.99 1442.05 Q1500.44 1441.47 1502.48 1441.47 Q1507.85 1441.47 1511.04 1444.15 Q1514.24 1446.84 1514.24 1451.33 Q1514.24 1453.46 1513.43 1455.38 Q1512.64 1457.28 1510.53 1459.87 Q1509.95 1460.54 1506.85 1463.76 Q1503.75 1466.95 1498.1 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M1668.37 1472.72 L1676 1472.72 L1676 1446.35 L1667.69 1448.02 L1667.69 1443.76 L1675.96 1442.09 L1680.63 1442.09 L1680.63 1472.72 L1688.27 1472.72 L1688.27 1476.65 L1668.37 1476.65 L1668.37 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M1706.19 1446.17 L1694.38 1464.61 L1706.19 1464.61 L1706.19 1446.17 M1704.96 1442.09 L1710.84 1442.09 L1710.84 1464.61 L1715.77 1464.61 L1715.77 1468.5 L1710.84 1468.5 L1710.84 1476.65 L1706.19 1476.65 L1706.19 1468.5 L1690.59 1468.5 L1690.59 1463.99 L1704.96 1442.09 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M1868.84 1472.72 L1876.48 1472.72 L1876.48 1446.35 L1868.17 1448.02 L1868.17 1443.76 L1876.43 1442.09 L1881.11 1442.09 L1881.11 1472.72 L1888.74 1472.72 L1888.74 1476.65 L1868.84 1476.65 L1868.84 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M1904.39 1457.51 Q1901.24 1457.51 1899.39 1459.66 Q1897.56 1461.81 1897.56 1465.56 Q1897.56 1469.29 1899.39 1471.47 Q1901.24 1473.62 1904.39 1473.62 Q1907.54 1473.62 1909.37 1471.47 Q1911.22 1469.29 1911.22 1465.56 Q1911.22 1461.81 1909.37 1459.66 Q1907.54 1457.51 1904.39 1457.51 M1913.68 1442.86 L1913.68 1447.11 Q1911.92 1446.28 1910.11 1445.84 Q1908.33 1445.4 1906.57 1445.4 Q1901.94 1445.4 1899.49 1448.53 Q1897.06 1451.65 1896.71 1457.97 Q1898.07 1455.96 1900.13 1454.89 Q1902.19 1453.8 1904.67 1453.8 Q1909.88 1453.8 1912.89 1456.98 Q1915.92 1460.12 1915.92 1465.56 Q1915.92 1470.89 1912.77 1474.11 Q1909.62 1477.32 1904.39 1477.32 Q1898.4 1477.32 1895.23 1472.74 Q1892.06 1468.13 1892.06 1459.41 Q1892.06 1451.21 1895.94 1446.35 Q1899.83 1441.47 1906.38 1441.47 Q1908.14 1441.47 1909.93 1441.81 Q1911.73 1442.16 1913.68 1442.86 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M2069.27 1472.72 L2076.91 1472.72 L2076.91 1446.35 L2068.6 1448.02 L2068.6 1443.76 L2076.87 1442.09 L2081.54 1442.09 L2081.54 1472.72 L2089.18 1472.72 L2089.18 1476.65 L2069.27 1476.65 L2069.27 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M2104.25 1460.24 Q2100.92 1460.24 2099 1462.02 Q2097.1 1463.8 2097.1 1466.93 Q2097.1 1470.05 2099 1471.84 Q2100.92 1473.62 2104.25 1473.62 Q2107.58 1473.62 2109.51 1471.84 Q2111.43 1470.03 2111.43 1466.93 Q2111.43 1463.8 2109.51 1462.02 Q2107.61 1460.24 2104.25 1460.24 M2099.58 1458.25 Q2096.57 1457.51 2094.88 1455.45 Q2093.21 1453.39 2093.21 1450.43 Q2093.21 1446.28 2096.15 1443.87 Q2099.11 1441.47 2104.25 1441.47 Q2109.41 1441.47 2112.35 1443.87 Q2115.29 1446.28 2115.29 1450.43 Q2115.29 1453.39 2113.6 1455.45 Q2111.94 1457.51 2108.95 1458.25 Q2112.33 1459.04 2114.2 1461.33 Q2116.1 1463.62 2116.1 1466.93 Q2116.1 1471.95 2113.02 1474.64 Q2109.97 1477.32 2104.25 1477.32 Q2098.53 1477.32 2095.46 1474.64 Q2092.4 1471.95 2092.4 1466.93 Q2092.4 1463.62 2094.3 1461.33 Q2096.2 1459.04 2099.58 1458.25 M2097.86 1450.86 Q2097.86 1453.55 2099.53 1455.05 Q2101.22 1456.56 2104.25 1456.56 Q2107.26 1456.56 2108.95 1455.05 Q2110.66 1453.55 2110.66 1450.86 Q2110.66 1448.18 2108.95 1446.68 Q2107.26 1445.17 2104.25 1445.17 Q2101.22 1445.17 2099.53 1446.68 Q2097.86 1448.18 2097.86 1450.86 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M2273.81 1472.72 L2290.13 1472.72 L2290.13 1476.65 L2268.18 1476.65 L2268.18 1472.72 Q2270.85 1469.96 2275.43 1465.33 Q2280.04 1460.68 2281.22 1459.34 Q2283.46 1456.81 2284.34 1455.08 Q2285.24 1453.32 2285.24 1451.63 Q2285.24 1448.87 2283.3 1447.14 Q2281.38 1445.4 2278.28 1445.4 Q2276.08 1445.4 2273.62 1446.17 Q2271.19 1446.93 2268.42 1448.48 L2268.42 1443.76 Q2271.24 1442.62 2273.69 1442.05 Q2276.15 1441.47 2278.18 1441.47 Q2283.55 1441.47 2286.75 1444.15 Q2289.94 1446.84 2289.94 1451.33 Q2289.94 1453.46 2289.13 1455.38 Q2288.35 1457.28 2286.24 1459.87 Q2285.66 1460.54 2282.56 1463.76 Q2279.46 1466.95 2273.81 1472.72 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M2305.2 1445.17 Q2301.59 1445.17 2299.76 1448.74 Q2297.95 1452.28 2297.95 1459.41 Q2297.95 1466.51 2299.76 1470.08 Q2301.59 1473.62 2305.2 1473.62 Q2308.83 1473.62 2310.64 1470.08 Q2312.47 1466.51 2312.47 1459.41 Q2312.47 1452.28 2310.64 1448.74 Q2308.83 1445.17 2305.2 1445.17 M2305.2 1441.47 Q2311.01 1441.47 2314.06 1446.07 Q2317.14 1450.66 2317.14 1459.41 Q2317.14 1468.13 2314.06 1472.74 Q2311.01 1477.32 2305.2 1477.32 Q2299.39 1477.32 2296.31 1472.74 Q2293.25 1468.13 2293.25 1459.41 Q2293.25 1450.66 2296.31 1446.07 Q2299.39 1441.47 2305.2 1441.47 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M145.311 1245.32 Q148.667 1246.04 150.542 1248.3 Q152.441 1250.57 152.441 1253.91 Q152.441 1259.02 148.922 1261.82 Q145.404 1264.62 138.922 1264.62 Q136.746 1264.62 134.431 1264.18 Q132.14 1263.77 129.686 1262.91 L129.686 1258.4 Q131.63 1259.53 133.945 1260.11 Q136.26 1260.69 138.783 1260.69 Q143.181 1260.69 145.473 1258.95 Q147.788 1257.22 147.788 1253.91 Q147.788 1250.85 145.635 1249.14 Q143.505 1247.4 139.686 1247.4 L135.658 1247.4 L135.658 1243.56 L139.871 1243.56 Q143.32 1243.56 145.149 1242.19 Q146.978 1240.8 146.978 1238.21 Q146.978 1235.55 145.08 1234.14 Q143.205 1232.7 139.686 1232.7 Q137.765 1232.7 135.566 1233.12 Q133.367 1233.54 130.728 1234.41 L130.728 1230.25 Q133.39 1229.51 135.705 1229.14 Q138.043 1228.77 140.103 1228.77 Q145.427 1228.77 148.529 1231.2 Q151.63 1233.6 151.63 1237.72 Q151.63 1240.6 149.987 1242.59 Q148.343 1244.55 145.311 1245.32 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M157.556 1229.39 L175.913 1229.39 L175.913 1233.33 L161.839 1233.33 L161.839 1241.8 Q162.857 1241.45 163.876 1241.29 Q164.894 1241.1 165.913 1241.1 Q171.7 1241.1 175.079 1244.28 Q178.459 1247.45 178.459 1252.86 Q178.459 1258.44 174.987 1261.54 Q171.515 1264.62 165.195 1264.62 Q163.019 1264.62 160.751 1264.25 Q158.505 1263.88 156.098 1263.14 L156.098 1258.44 Q158.181 1259.58 160.403 1260.13 Q162.626 1260.69 165.103 1260.69 Q169.107 1260.69 171.445 1258.58 Q173.783 1256.47 173.783 1252.86 Q173.783 1249.25 171.445 1247.15 Q169.107 1245.04 165.103 1245.04 Q163.228 1245.04 161.353 1245.46 Q159.501 1245.87 157.556 1246.75 L157.556 1229.39 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M193.528 1232.47 Q189.917 1232.47 188.089 1236.04 Q186.283 1239.58 186.283 1246.71 Q186.283 1253.81 188.089 1257.38 Q189.917 1260.92 193.528 1260.92 Q197.163 1260.92 198.968 1257.38 Q200.797 1253.81 200.797 1246.71 Q200.797 1239.58 198.968 1236.04 Q197.163 1232.47 193.528 1232.47 M193.528 1228.77 Q199.338 1228.77 202.394 1233.37 Q205.473 1237.96 205.473 1246.71 Q205.473 1255.43 202.394 1260.04 Q199.338 1264.62 193.528 1264.62 Q187.718 1264.62 184.639 1260.04 Q181.584 1255.43 181.584 1246.71 Q181.584 1237.96 184.639 1233.37 Q187.718 1228.77 193.528 1228.77 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M146.214 917.471 Q149.57 918.189 151.445 920.458 Q153.343 922.726 153.343 926.059 Q153.343 931.175 149.825 933.976 Q146.306 936.777 139.825 936.777 Q137.649 936.777 135.334 936.337 Q133.043 935.92 130.589 935.064 L130.589 930.55 Q132.533 931.684 134.848 932.263 Q137.163 932.842 139.686 932.842 Q144.084 932.842 146.376 931.106 Q148.691 929.369 148.691 926.059 Q148.691 923.004 146.538 921.291 Q144.408 919.555 140.589 919.555 L136.561 919.555 L136.561 915.712 L140.774 915.712 Q144.223 915.712 146.052 914.346 Q147.88 912.958 147.88 910.365 Q147.88 907.703 145.982 906.291 Q144.107 904.856 140.589 904.856 Q138.667 904.856 136.468 905.272 Q134.269 905.689 131.63 906.569 L131.63 902.402 Q134.293 901.661 136.607 901.291 Q138.945 900.921 141.005 900.921 Q146.329 900.921 149.431 903.351 Q152.533 905.759 152.533 909.879 Q152.533 912.749 150.89 914.74 Q149.246 916.708 146.214 917.471 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M157.232 901.546 L179.454 901.546 L179.454 903.536 L166.908 936.106 L162.024 936.106 L173.829 905.481 L157.232 905.481 L157.232 901.546 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M184.57 901.546 L202.926 901.546 L202.926 905.481 L188.852 905.481 L188.852 913.953 Q189.871 913.606 190.889 913.444 Q191.908 913.258 192.926 913.258 Q198.713 913.258 202.093 916.43 Q205.473 919.601 205.473 925.018 Q205.473 930.596 202 933.698 Q198.528 936.777 192.209 936.777 Q190.033 936.777 187.764 936.406 Q185.519 936.036 183.112 935.295 L183.112 930.596 Q185.195 931.731 187.417 932.286 Q189.639 932.842 192.116 932.842 Q196.121 932.842 198.459 930.735 Q200.797 928.629 200.797 925.018 Q200.797 921.407 198.459 919.3 Q196.121 917.194 192.116 917.194 Q190.241 917.194 188.366 917.61 Q186.514 918.027 184.57 918.907 L184.57 901.546 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M141.862 577.774 L130.056 596.223 L141.862 596.223 L141.862 577.774 M140.635 573.699 L146.515 573.699 L146.515 596.223 L151.445 596.223 L151.445 600.111 L146.515 600.111 L146.515 608.259 L141.862 608.259 L141.862 600.111 L126.26 600.111 L126.26 595.598 L140.635 573.699 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M166.515 576.778 Q162.903 576.778 161.075 580.343 Q159.269 583.885 159.269 591.014 Q159.269 598.121 161.075 601.685 Q162.903 605.227 166.515 605.227 Q170.149 605.227 171.954 601.685 Q173.783 598.121 173.783 591.014 Q173.783 583.885 171.954 580.343 Q170.149 576.778 166.515 576.778 M166.515 573.075 Q172.325 573.075 175.38 577.681 Q178.459 582.264 178.459 591.014 Q178.459 599.741 175.38 604.347 Q172.325 608.931 166.515 608.931 Q160.704 608.931 157.626 604.347 Q154.57 599.741 154.57 591.014 Q154.57 582.264 157.626 577.681 Q160.704 573.075 166.515 573.075 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M193.528 576.778 Q189.917 576.778 188.089 580.343 Q186.283 583.885 186.283 591.014 Q186.283 598.121 188.089 601.685 Q189.917 605.227 193.528 605.227 Q197.163 605.227 198.968 601.685 Q200.797 598.121 200.797 591.014 Q200.797 583.885 198.968 580.343 Q197.163 576.778 193.528 576.778 M193.528 573.075 Q199.338 573.075 202.394 577.681 Q205.473 582.264 205.473 591.014 Q205.473 599.741 202.394 604.347 Q199.338 608.931 193.528 608.931 Q187.718 608.931 184.639 604.347 Q181.584 599.741 181.584 591.014 Q181.584 582.264 184.639 577.681 Q187.718 573.075 193.528 573.075 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M144.455 249.927 L132.649 268.376 L144.455 268.376 L144.455 249.927 M143.228 245.853 L149.107 245.853 L149.107 268.376 L154.038 268.376 L154.038 272.265 L149.107 272.265 L149.107 280.413 L144.455 280.413 L144.455 272.265 L128.853 272.265 L128.853 267.751 L143.228 245.853 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M163.135 276.478 L179.454 276.478 L179.454 280.413 L157.51 280.413 L157.51 276.478 Q160.172 273.724 164.755 269.094 Q169.362 264.441 170.542 263.099 Q172.788 260.576 173.667 258.839 Q174.57 257.08 174.57 255.39 Q174.57 252.636 172.626 250.9 Q170.704 249.164 167.603 249.164 Q165.403 249.164 162.95 249.927 Q160.519 250.691 157.741 252.242 L157.741 247.52 Q160.566 246.386 163.019 245.807 Q165.473 245.228 167.51 245.228 Q172.88 245.228 176.075 247.914 Q179.269 250.599 179.269 255.089 Q179.269 257.219 178.459 259.14 Q177.672 261.039 175.565 263.631 Q174.987 264.302 171.885 267.52 Q168.783 270.714 163.135 276.478 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M184.57 245.853 L202.926 245.853 L202.926 249.789 L188.852 249.789 L188.852 258.261 Q189.871 257.914 190.889 257.752 Q191.908 257.566 192.926 257.566 Q198.713 257.566 202.093 260.738 Q205.473 263.909 205.473 269.326 Q205.473 274.904 202 278.006 Q198.528 281.085 192.209 281.085 Q190.033 281.085 187.764 280.714 Q185.519 280.344 183.112 279.603 L183.112 274.904 Q185.195 276.038 187.417 276.594 Q189.639 277.15 192.116 277.15 Q196.121 277.15 198.459 275.043 Q200.797 272.937 200.797 269.326 Q200.797 265.714 198.459 263.608 Q196.121 261.501 192.116 261.501 Q190.241 261.501 188.366 261.918 Q186.514 262.335 184.57 263.214 L184.57 245.853 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M1226.68 1508.52 L1233.58 1508.52 L1246.76 1528.07 L1259.84 1508.52 L1266.75 1508.52 L1249.94 1533.41 L1249.94 1556.04 L1243.48 1556.04 L1243.48 1533.41 L1226.68 1508.52 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M1294.73 1536.76 L1294.73 1539.62 L1267.8 1539.62 Q1268.18 1545.67 1271.43 1548.85 Q1274.71 1552 1280.53 1552 Q1283.91 1552 1287.06 1551.17 Q1290.24 1550.35 1293.36 1548.69 L1293.36 1554.23 Q1290.21 1555.57 1286.9 1556.27 Q1283.59 1556.97 1280.18 1556.97 Q1271.65 1556.97 1266.65 1552 Q1261.69 1547.04 1261.69 1538.57 Q1261.69 1529.82 1266.4 1524.69 Q1271.14 1519.54 1279.16 1519.54 Q1286.36 1519.54 1290.53 1524.18 Q1294.73 1528.8 1294.73 1536.76 M1288.87 1535.04 Q1288.81 1530.23 1286.16 1527.37 Q1283.56 1524.5 1279.23 1524.5 Q1274.32 1524.5 1271.36 1527.27 Q1268.44 1530.04 1267.99 1535.07 L1288.87 1535.04 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M1317.07 1538.12 Q1309.97 1538.12 1307.24 1539.75 Q1304.5 1541.37 1304.5 1545.29 Q1304.5 1548.4 1306.54 1550.25 Q1308.6 1552.07 1312.14 1552.07 Q1317.01 1552.07 1319.94 1548.63 Q1322.9 1545.16 1322.9 1539.43 L1322.9 1538.12 L1317.07 1538.12 M1328.75 1535.71 L1328.75 1556.04 L1322.9 1556.04 L1322.9 1550.63 Q1320.89 1553.88 1317.9 1555.44 Q1314.91 1556.97 1310.58 1556.97 Q1305.1 1556.97 1301.86 1553.91 Q1298.64 1550.82 1298.64 1545.67 Q1298.64 1539.65 1302.65 1536.6 Q1306.69 1533.54 1314.68 1533.54 L1322.9 1533.54 L1322.9 1532.97 Q1322.9 1528.93 1320.22 1526.73 Q1317.58 1524.5 1312.77 1524.5 Q1309.72 1524.5 1306.82 1525.23 Q1303.93 1525.97 1301.25 1527.43 L1301.25 1522.02 Q1304.47 1520.78 1307.49 1520.17 Q1310.51 1519.54 1313.38 1519.54 Q1321.11 1519.54 1324.93 1523.55 Q1328.75 1527.56 1328.75 1535.71 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M1355.55 1525.87 Q1354.56 1525.3 1353.39 1525.04 Q1352.24 1524.76 1350.84 1524.76 Q1345.88 1524.76 1343.2 1528 Q1340.56 1531.22 1340.56 1537.27 L1340.56 1556.04 L1334.67 1556.04 L1334.67 1520.4 L1340.56 1520.4 L1340.56 1525.93 Q1342.41 1522.69 1345.37 1521.13 Q1348.33 1519.54 1352.56 1519.54 Q1353.16 1519.54 1353.9 1519.63 Q1354.63 1519.7 1355.52 1519.85 L1355.55 1525.87 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M42.0438 786.185 L48.314 786.185 Q46.5634 789.846 45.704 793.092 Q44.8447 796.339 44.8447 799.362 Q44.8447 804.614 46.8817 807.479 Q48.9187 810.311 52.6745 810.311 Q55.8255 810.311 57.4488 808.434 Q59.0402 806.524 60.0269 801.24 L60.8226 797.357 Q62.1912 790.164 65.6605 786.758 Q69.098 783.321 74.8908 783.321 Q81.7976 783.321 85.3624 787.968 Q88.9272 792.583 88.9272 801.527 Q88.9272 804.901 88.1633 808.72 Q87.3994 812.508 85.9035 816.582 L79.2831 816.582 Q81.4793 812.667 82.5933 808.911 Q83.7073 805.155 83.7073 801.527 Q83.7073 796.02 81.543 793.028 Q79.3786 790.037 75.3682 790.037 Q71.8671 790.037 69.8937 792.201 Q67.9204 794.333 66.9337 799.235 L66.1698 803.15 Q64.7375 810.343 61.682 813.558 Q58.6264 816.773 53.1837 816.773 Q46.8817 816.773 43.2532 812.348 Q39.6248 807.892 39.6248 800.094 Q39.6248 796.752 40.2295 793.283 Q40.8343 789.814 42.0438 786.185 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M42.2347 771.385 L52.3562 771.385 L52.3562 759.322 L56.9077 759.322 L56.9077 771.385 L76.2594 771.385 Q80.6199 771.385 81.8613 770.207 Q83.1026 768.998 83.1026 765.338 L83.1026 759.322 L88.0042 759.322 L88.0042 765.338 Q88.0042 772.117 85.4897 774.695 Q82.9434 777.273 76.2594 777.273 L56.9077 777.273 L56.9077 781.57 L52.3562 781.57 L52.3562 777.273 L42.2347 777.273 L42.2347 771.385 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M56.4621 739.366 Q56.4621 744.076 60.1542 746.813 Q63.8145 749.551 70.212 749.551 Q76.6095 749.551 80.3017 746.845 Q83.9619 744.108 83.9619 739.366 Q83.9619 734.687 80.2698 731.95 Q76.5777 729.212 70.212 729.212 Q63.8781 729.212 60.186 731.95 Q56.4621 734.687 56.4621 739.366 M51.4968 739.366 Q51.4968 731.727 56.4621 727.366 Q61.4273 723.006 70.212 723.006 Q78.9649 723.006 83.9619 727.366 Q88.9272 731.727 88.9272 739.366 Q88.9272 747.036 83.9619 751.397 Q78.9649 755.725 70.212 755.725 Q61.4273 755.725 56.4621 751.397 Q51.4968 747.036 51.4968 739.366 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M53.7248 691.209 L59.1993 691.209 Q57.8307 693.692 57.1623 696.206 Q56.4621 698.689 56.4621 701.235 Q56.4621 706.932 60.0905 710.083 Q63.6872 713.234 70.212 713.234 Q76.7369 713.234 80.3653 710.083 Q83.9619 706.932 83.9619 701.235 Q83.9619 698.689 83.2935 696.206 Q82.5933 693.692 81.2247 691.209 L86.6355 691.209 Q87.7814 693.66 88.3543 696.302 Q88.9272 698.912 88.9272 701.872 Q88.9272 709.924 83.8664 714.667 Q78.8057 719.409 70.212 719.409 Q61.491 719.409 56.4939 714.635 Q51.4968 709.829 51.4968 701.49 Q51.4968 698.784 52.0697 696.206 Q52.6108 693.628 53.7248 691.209 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip670)" d="M 0 0 M38.479 685.289 L38.479 679.401 L67.7294 679.401 L52.3562 661.927 L52.3562 654.447 L69.0344 673.353 L88.0042 653.651 L88.0042 661.29 L70.5939 679.401 L88.0042 679.401 L88.0042 685.289 L38.479 685.289 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip672)" style="stroke:#009af9; stroke-width:4; stroke-opacity:1; fill:none" points="
  289.566,590.979 389.72,161.766 489.875,487.447 590.03,86.1857 690.185,807.895 790.34,808.675 890.495,868.847 990.65,891.142 1090.8,1199.3 1190.96,1044.06 
  1291.11,1136.15 1391.27,820.031 1491.42,679.339 1591.58,1004 1691.73,950.761 1791.89,703.25 1892.04,774.187 1992.2,978.614 2092.35,1383.32 2192.51,873.477 
  2292.66,1384.24 
  "/>
</svg>
<p>The results are different here, since the construction of this version and the one above are quite different and cannot be randomly seeded in the same manner.</p><p>However, as you can see, it is for the most part just a re-arranged implementation of the integrator method - giving users flexibility in their architecture choices.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../interact/">« Interactive application</a><a class="docs-footer-nextpage" href="../../mesa/">Comparison against Mesa (Python) »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 14 July 2020 11:19">Tuesday 14 July 2020</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
